Class PM_HitPuff : Actor
{
    int hitspawn;
    Default
	{
	RenderStyle "Add";
	Alpha 0.3;
	Scale 0.8;
	Radius 0;
	Height 0;
	+NOBLOCKMAP
	+NOGRAVITY
	+NOEXTREMEDEATH
	+FORCEXYBILLBOARD
	+DONTSPLASH
	-EXPLODEONWATER
	Gravity 0.01;
	DamageType "Bullet";
	Decal "BulletDecalNew1";
	}
	
	override void PostBeginPlay()
	{ Super.PostBeginPlay();
	  tex[0] = TexMan.CheckForTexture("GNSML0",TexMan.Type_Sprite);
	  tex[1] = TexMan.CheckForTexture("LEYSO0",TexMan.Type_Sprite);
	  tex[2] = TexMan.CheckForTexture("LENYA0",TexMan.Type_Sprite);
	  hitspawn = random(2,4); }
	 
	TextureID tex[3];
	  
  States
  {
  Spawn:
    TNT1 A 0;
	TNT1 A 0 {
	for(int i=hitspawn;i>0;i--) A_SpawnItemEx("PM_BulletHit",0,0,0,frandom(20,20),frandom(-20,20),frandom(-20,20),random(-360,360),SXF_NOCHECKPOSITION,0);
	A_SpawnParticleEx
	( "", tex[0], style: STYLE_Add, flags:SPF_ROLL|SPF_RELATIVE, lifetime:random(5,25), size:random(10,45),
	  velx:frandom(-0.5,0.5), vely:frandom(-0.5,0.5), velz:frandom(-0.5,0.5),
	  accelx:frandom(-0.0015,0.0015), accely:frandom(-0.0015,0.0015), accelz:frandom(-0.0015,0.0015), startroll:random(-180,180));
	A_SpawnParticleEx
	( "", 
	  tex[1], 
	  style: STYLE_Add, 
	  flags:SPF_ROLL|SPF_RELATIVE|SPF_FULLBRIGHT, 
	  lifetime: random(1,5), 
	  size: random(15,45),
	  startalphaf: frandom(0.15,0.85),
	  sizestep: frandom(0.25,0.85), 
	  startroll: random(-180,180));
	A_SpawnParticleEx
	( "", 
	  tex[2], 
	  style: STYLE_Add, 
	  flags:SPF_ROLL|SPF_RELATIVE|SPF_FULLBRIGHT, 
	  lifetime: random(1,6), 
	  size: random(25,80),
	  startalphaf: frandom(0.35,0.85),
	  sizestep: frandom(0.35,0.85), 
	  startroll: random(-180,180));
	}
    Stop;
  Melee:
	TNT1 A 1;
	Stop;
  }
}

Class PM_BulletHit : Actor
{
  //[NERU] Original code done by Bugsie
  Default
  {
  Alpha 1.0;
  Speed 15;
  +BRIGHT
  +MISSILE
  +CLIENTSIDEONLY
  +BLOODLESSIMPACT 
  +FORCEXYBILLBOARD
  +THRUACTORS
  -NOGRAVITY
  +DONTSPLASH
  +THRUACTORS
  +NOBLOCKMONST
  +CANNOTPUSH
  +NOTRIGGER
  BounceFactor 1;
  BounceType "Hexen";
  RenderStyle "Add";
  Scale 0.6;
  Radius 0;
  Height 1;
  }
  states
  {
  Spawn:
    TNT1 A 0;
	NULL A 0
	{
	A_ScaleVelocity(frandom(0.3,0.6));
	A_SetScale(Scale.X-frandom(0.10,0.45));
	}
	NULL A 3;
	NULL A 1 A_FadeOut(0.105);
    Wait;
  }
}

//Fires

Class PM_OrangeFireEffect : Actor
{
 Default
 {
  +NOINTERACTION
  +CLIENTSIDEONLY
  +ROLLSPRITE
  +FORCEXYBILLBOARD
  Renderstyle "Add";
  Scale 0.20;
  +Bright
 }
  States
  {
  Spawn:
	TNT1 A 0 NoDelay A_SetRoll(random(0,360));
	TNT1 A 0 A_SetScale(Scale.X-0.01);
	F1R1 A 1 A_FadeOut(0.08);
	Loop;
	}
}

Class PM_BlueFireEffect : PM_OrangeFireEffect
{
  Default { Scale 0.2; }
  States
  {
  Spawn:
	TNT1 A 0 NoDelay A_SetRoll(random(0,360));
	TNT1 A 0 A_SetScale(Scale.X-0.017);
	F1R1 B 1 A_FadeOut(0.08);
	Loop;
  }
}

Class PM_GreenFireEffect : PM_OrangeFireEffect
{
  Default { Scale 0.3; }
  States
  {
  Spawn:
	TNT1 A 0 NoDelay A_SetRoll(random(0,360));
	TNT1 A 0 A_SetScale(Scale.X-0.02);
	FIG1 A 1 A_FadeOut(0.08);
	Loop;
	}
}

Class PM_RedFireEffect : PM_OrangeFireEffect
{
  Default
  { Scale 0.1; }
  States
  {
  Spawn:
	TNT1 A 0 NoDelay A_SetRoll(random(0,360));
	TNT1 A 0 A_SetScale(Scale.X-0.015);
	FIR1 R 1 A_FadeOut(0.08);
	Loop;
	}
}

Class PM_RedFireEffectBig : PM_RedFireEffect
{ Default { Scale 0.3; } }

Class PM_WalkFire : Actor
{
 Default
 {
  +NoClip
  +DropOff
  +Randomize
  +CLIENTSIDEONLY
  Scale 1.5;
  Speed 0;
  RenderStyle "Add";
  Alpha 1;
 }
  States
  {
  Spawn:
    FRTF A random(2,3) Bright;
    FRTF A 0;
    FRTF B random(2,3) Bright;
    FRTF B 0;
    FRTF C random(2,3) Bright;
    FRTF CDEFGEFCDEFGEFGHIJKLMNO 3 Bright;
    Stop;
  }
}

Class PM_BruiserWalkFire : PM_WalkFire
{ Default { Translation "0:255=%[0,0,0]:[0.6,2.0,0.28]"; } }

Class PM_BelphegorWalkFire : PM_WalkFire
{ Default { Translation "0:255=%[0,0,0]:[0.5,1.6,2.0]"; } }

Class PM_GraveGuardWalkFire : PM_WalkFire
{ Default { Translation "0:255=%[0,0,0]:[0.6,0.9,2.0]"; } }

//Possessing Demons
class PM_FleeingDarkSpiritOrb: Actor
{
Default
{
   Radius 1;
   Height 1;
   Speed 0;
   +NOGRAVITY
   +THRUACTORS
   +DONTHARMSPECIES
   +NOINTERACTION
   -SHOOTABLE
   -COUNTKILL
	}
   States
   {
   Spawn:
   TNT1 A random(0,50);
   TNT1 A 0
   {
   A_SpawnParticleEx
	    (   
		 "000000",
		 TexMan.CheckForTexture("APPLC0"),
		 style: STYLE_Normal,
		 flags: SPF_ROLL|SPF_RELATIVE,
		 lifetime: random(10,60),
		 size: frandom(3.0,6.0),
		 zoff: 5,
		 velx: frandom(-1.0,1.0),
		 vely: frandom(-1.0,1.0),
		 velz: frandom(0.0,1.0),
		 accelx: frandom(-0.5,0.5),
		 accely: frandom(-0.5,0.5),
		 accelz: frandom(-0.2,0.5),
		 startalphaf: frandom(0.8,1),
		 fadestepf: 0,
		 sizestep: 0,
		 startroll: random(-180,180)
	    );
	}
   Stop;
   }
}

class PM_PossSpriteFlee: Actor
{
Default
{
  +NOINTERACTION
  +CLIENTSIDEONLY
  +THRUACTORS
  +MISSILE
  SeeSound "DemonicSprite/Flee";
  Speed 12;
  }
   void PossSpriteSmoke()
	{
		A_SpawnParticleEx
	    (   
		 "000000",
		 TexMan.CheckForTexture("GNSMK0"),
		 style: STYLE_Normal,
		 flags: SPF_ROLL|SPF_RELATIVE,
		 lifetime: random(1,10),
		 size: frandom(6,15),
		 zoff: 2,
		 velx: frandom(-0.2,0.2),
		 vely: frandom(-0.2,0.2),
		 velz: frandom(-0.2,0.2),
		 startalphaf: frandom(0.8,1),
		 fadestepf: -1,
		 sizestep: frandom(0.2,1.5),
		 startroll: random(-180,180)
	    );
  }
  States
  {
  Spawn:
	TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1
	{
	PossSpriteSmoke();
	}
	Stop;
	}
}

class PM_PossessingDemonSprite: Actor
{
Default
{
   Radius 4;
   Height 4;
   Speed 3;
   Monster;
   +NOGRAVITY
   +THRUACTORS
   +DONTHARMSPECIES
   -SHOOTABLE
   -COUNTKILL
   DamageFunction (1);
   BounceType "Hexen";
   BounceFactor 1;
   RENDERSTYLE "Translucent";
   }
   void PossSpriteSmoke()
	{
		A_SpawnParticleEx
	    (   
		 "000000",
		 TexMan.CheckForTexture("GNSMK0"),
		 style: STYLE_Normal,
		 flags: SPF_ROLL|SPF_RELATIVE,
		 lifetime: random(1,10),
		 size: frandom(6,15),
		 zoff: 2,
		 velx: frandom(-0.2,0.2),
		 vely: frandom(-0.2,0.2),
		 velz: frandom(-0.2,0.2),
		 startalphaf: frandom(0.8,1),
		 fadestepf: -1,
		 sizestep: frandom(0.2,1.5),
		 startroll: random(-180,180)
	    );
	}
   States
   {
   Spawn:
	  TNT1 A 1;
	  TNT1 A 0 A_Jump(168,"Flee");
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
	  TNT1 A 0 A_ChangeVelocity(0,0,0,CVF_REPLACE);
   Go:
	  TNT1 AAAAAAAAAAAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 AAAAAAAAAAAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 AAAAAAAAAAAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-2,2),random(-2,2),random(-2,2));
	  TNT1 AAAAAAAAAAAA 1
	  {
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_Jump(55,"Charge");
	  TNT1 A 0 A_Jump(128,"Go");
	  TNT1 A 0 A_ChangeVelocity(0,0,0,CVF_REPLACE);
	  TNT1 A 0 A_ChangeVelocity(random(-1,1),random(-1,1),random(-1,1));
      loop;
   Charge:
	  TNT1 A 0 A_ChangeVelocity(0,0,0,CVF_REPLACE);
	  TNT1 A 0 A_Jump(110,"Flee");
	  TNT1 AAAAAAA 1
	  {
	  A_FaceTarget();
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_StartSound("DemonicSprite/Warn",CHAN_7);
	  TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1
	  {
	  A_FaceTarget();
	  PossSpriteSmoke();
	  }
	  TNT1 A 0 A_SpawnProjectile("PM_PossSpriteAttack",0,0,0,CMF_TRACKOWNER);
	  Stop;
   Bounce:
	  TNT1 A 0
	  {
	  PossSpriteSmoke();
	  }
	  Goto Spawn;
   Flee:
	  TNT1 A 0;
	  TNT1 A 0 A_SpawnProjectile("PM_PossSpriteFlee",2,0,random(-180,180),CMF_OFFSETPITCH,random(-90,20));
	  Stop;
   Death:
	  TNT1 A 1;
      Stop;
   }
}

class PM_PossSpriteAttack : Actor
{
Default
{
  Speed 16;
  FastSpeed 20;
  DamageFunction (random(1,1));
  Radius 5;
  Height 5;
  SeeSound "";
  DeathSound "";
  -THRUSPECIES
  -Clientsideonly
  -DONTHARMSPECIES
  -THRUACTORS
  RenderStyle "Normal";
  BounceType "None";
  PROJECTILE;
   }
   void PossSpriteSmoke()
	{
		A_SpawnParticleEx
	    (   
		 "000000",
		 TexMan.CheckForTexture("GNSMK0"),
		 style: STYLE_Normal,
		 flags: SPF_ROLL|SPF_RELATIVE,
		 lifetime: random(1,10),
		 size: frandom(6,15),
		 zoff: 2,
		 velx: frandom(-0.2,0.2),
		 vely: frandom(-0.2,0.2),
		 velz: frandom(-0.2,0.2),
		 startalphaf: frandom(0.8,1),
		 fadestepf: -1,
		 sizestep: frandom(0.2,1.5),
		 startroll: random(-180,180)
	    );
  }
  States
	{
	Spawn:
		TNT1 AAA 1
	    {
	    PossSpriteSmoke();
	    }
		Loop;
	Death:
		TNT1 A 1;
		Stop;
	}
}




//Teleport Fogs

Class PM_NormalTeleportFog : Actor replaces TeleportFog
{
Default
{
Alpha 1;
XScale 1;
YScale 1;
Height 2;
+NOBLOCKMAP
+NOINTERACTION
+NOGRAVITY
+NOTELEPORT
+ZDOOMTRANS
Translation "0:255=%[0,0,0]:[0.5,1.8,0.2]";
RenderStyle "Add";
}

 override void PostBeginPlay()
 {
  Super.PostBeginPlay();
  tex[0] = TexMan.CheckForTexture("PLAGC0",TexMan.Type_Sprite);
  tex[1] = TexMan.CheckForTexture("SPKOG0",TexMan.Type_Sprite);
  tex[2] = TexMan.CheckForTexture("DTPRA0",TexMan.Type_Sprite);
  tex[3] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
 }
 
 TextureID tex[4];

States
 {
 Spawn:
 TNT1 A 0;
 TNT1 A 0 A_StartSound("PM/NormalTeleport",CHAN_6);
 TNT1 A 0
 {
	A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 8,
		size: 300,
		zoff: 50,
		startalphaf: 1,
		fadestepf: -1,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		A_SpawnParticleEx
		(
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 8,
		size: 250,
		zoff: 50,
		startalphaf: 0.7,
		fadestepf: -1,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		A_SpawnParticleEx
		(
		"",
		tex[2],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 4,
		size: 800,
		zoff: 50,
		startalphaf: 0.7,
		fadestepf: -1,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
	}
 TNT1 AAAAAAAAAAAAAAA 0
	{
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(20,80),
		size: frandom(10,30), xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65),
		velx: frandom(-4,4), vely: frandom(-4,4), velz: frandom(-4,4), startalphaf: 0.7, fadestepf: -1,
		sizestep: frandom(-0.3,-3), startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,100),
		size: frandom(0.2,15), xoff: random(-30,30), yoff: random(-30,30), velx: frandom(-0.2,0.2), vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3), accelx: frandom(-0.02,0.02), accely: frandom(-0.02,0.02), accelz: frandom(-0.02,0.02),
		startalphaf: 1.0, fadestepf: -1, sizestep: -0.5, startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	}
 DB26 ABCDEFGHIJK 1 BRIGHT Light("PM_GTeleMediumFlicker2")
	{
	A_SpawnParticleEx
		( "", tex[2], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 1, size: frandom(100,430),
		zoff: 50, startalphaf: frandom(0.1,0.5), startroll: random(-180,180) );
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,400), size: frandom(0.2,10),
		xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65), velx: frandom(-0.5,0.5), vely: frandom(-0.5,0.5),
		velz: frandom(-0.5,0.5), accelx: frandom(-0.05,0.05), accely: frandom(-0.05,0.05), accelz: frandom(-0.05,0.05), startalphaf: 1.0,
		fadestepf: -1, sizestep: -0.05, startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,100), size: frandom(0.2,15),
		xoff: random(-30,30), yoff: random(-30,30), velx: frandom(-0.2,0.2), vely: frandom(-0.2,0.2), velz: frandom(0.5,3), accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02), accelz: frandom(-0.02,0.02), startalphaf: 1.0, fadestepf: -1, sizestep: -0.5, startroll: random(-180,180), rollvel: frandom(-10,10),
		rollacc: frandom(-1,1) );
	A_SpawnParticleEx
	    ( "12ff22", tex[3], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(50,90), size: frandom(15,50), xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65),
		velx: frandom(-1,1), vely: frandom(-1,1), velz: frandom(-1,1), startalphaf: frandom(0.05,0.5), fadestepf: -1,
		sizestep: frandom(0.2,6), startroll: random(-180,180), rollvel: frandom(-0.1,0.1) );
	}
 DB26 LMMNOPQRSTUV 2 BRIGHT Light("PM_GTeleMediumFlicker1")
	{
	A_SpawnParticleEx
		( "", tex[2], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 1,
		size: frandom(70,200), zoff: 50, startalphaf: frandom(0.1,0.5), startroll: random(-180,180) );
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(5,200), size: frandom(0.2,10),
		xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65), velx: frandom(-0.5,0.5), vely: frandom(-0.5,0.5),
		velz: frandom(-0.5,0.5), accelx: frandom(-0.05,0.05), accely: frandom(-0.05,0.05), accelz: frandom(-0.05,0.05), startalphaf: 1.0,
		fadestepf: -1, sizestep: -0.05, startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
		A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,100), size: frandom(0.2,15),
		xoff: random(-30,30), yoff: random(-30,30), velx: frandom(-0.2,0.2), vely: frandom(-0.2,0.2), velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02), accely: frandom(-0.02,0.02), accelz: frandom(-0.02,0.02), startalphaf: 1.0, fadestepf: -1, sizestep: -0.5,
		startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
		}
 Stop;
 }
}


class PM_PossessedTeleportFog : Actor
{
Default
{
Alpha 1;
XScale 1;
YScale 1;
Height 2;
+NOBLOCKMAP
+NOINTERACTION
+NOGRAVITY
+NOTELEPORT
+ZDOOMTRANS
Translation "0:255=%[0,0,0]:[1.8,0.4,0.3]";
RenderStyle "Add";
}

override void PostBeginPlay()
{
 Super.PostBeginPlay();
 tex[0] = TexMan.CheckForTexture("SPKRA0",TexMan.Type_Sprite);
 tex[1] = TexMan.CheckForTexture("DTPRR0",TexMan.Type_Sprite);
 tex[2] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
}

TextureID tex[3];

States
 {
 Spawn:
 TNT1 A 0;
 TNT1 A 0 A_StartSound("PM/NormalTeleport",CHAN_6);
 TNT1 A 0
 {
	A_SpawnParticleEx
		( "", tex[0], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 8,
		size: 300, zoff: 50, startalphaf: 0.7, fadestepf: -1, startroll: random(-180,180), rollvel: frandom(-5,5) );
		A_SpawnParticleEx
		( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 4, size: 800,
		zoff: 50, startalphaf: 0.8, fadestepf: -1, startroll: random(-180,180), rollvel: frandom(-5,5) );
	}
 TNT1 AAAAAAAAAAAAAAA 0
	{
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(20,80), size: frandom(10,30), xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65),
		velx: frandom(-4,4), vely: frandom(-4,4), velz: frandom(-4,4), startalphaf: 0.7, fadestepf: -1, sizestep: frandom(-0.3,-3),
		startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,100), size: frandom(0.2,15),
		xoff: random(-30,30), yoff: random(-30,30), velx: frandom(-0.2,0.2), vely: frandom(-0.2,0.2), velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02), accely: frandom(-0.02,0.02), accelz: frandom(-0.02,0.02), startalphaf: 1.0, fadestepf: -1,
		sizestep: -0.5, startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	}
 DB26 ABCDEFGHIJK 1 BRIGHT Light("PM_RTeleMediumFlicker2")
	{
	A_SpawnParticleEx
		( "", tex[0], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 1, size: frandom(100,430), zoff: 50, startalphaf: frandom(0.1,0.5), startroll: random(-180,180) );
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,400), size: frandom(0.2,10),
		xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65), velx: frandom(-0.5,0.5), vely: frandom(-0.5,0.5), velz: frandom(-0.5,0.5),
		accelx: frandom(-0.05,0.05), accely: frandom(-0.05,0.05), accelz: frandom(-0.05,0.05), startalphaf: 1.0, fadestepf: -1,
		sizestep: -0.05, startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	A_SpawnParticleEx
	    ( "ff1212", tex[2], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(50,90), size: frandom(15,50),
		xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65), velx: frandom(-1,1), vely: frandom(-1,1), velz: frandom(-1,1),
		startalphaf: frandom(0.05,0.5), fadestepf: -1, sizestep: frandom(0.2,6), startroll: random(-180,180), rollvel: frandom(-0.1,0.1));
	A_SpawnParticleEx
	    ( "", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,100), size: frandom(0.2,15),
		xoff: random(-30,30), yoff: random(-30,30), velx: frandom(-0.2,0.2), vely: frandom(-0.2,0.2), velz: frandom(0.5,3), accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02), accelz: frandom(-0.02,0.02), startalphaf: 1.0, fadestepf: -1, sizestep: -0.5, startroll: random(-180,180), rollvel: frandom(-10,10),
		rollacc: frandom(-1,1) );
	}
 DB26 LMMNOPQRSTUV 2 BRIGHT Light("PM_RTeleMediumFlicker1")
	{
	A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(70,200),
		zoff: 50,
		startalphaf: frandom(0.1,0.5),
		startroll: random(-180,180)
		);
		A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(5,200),
		size: frandom(0.2,10),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(30,65),
		velx: frandom(-0.5,0.5),
		vely: frandom(-0.5,0.5),
		velz: frandom(-0.5,0.5),
		accelx: frandom(-0.05,0.05),
		accely: frandom(-0.05,0.05),
		accelz: frandom(-0.05,0.05),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.05,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
		A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(0.2,15),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
		}
 Stop;
 }
}


class PM_DemonicTeleportFog : Actor
{
Default
{
Alpha 1;
XScale 1.3;
YScale 1.1;
Translation "0:255=%[0,0,0]:[1.8,1.4,0.3]";
+NOBLOCKMAP
+NOGRAVITY
+NOTELEPORT
+ZDOOMTRANS
RenderStyle "Add";
}

override void PostBeginPlay()
{
 Super.PostBeginPlay();
 tex[0] = TexMan.CheckForTexture("DTPRR0",TexMan.Type_Sprite);
 tex[1] = TexMan.CheckForTexture("SPKOA0",TexMan.Type_Sprite);
 tex[2] = TexMan.CheckForTexture("DB26W0",TexMan.Type_Sprite);
 tex[3] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
 tex[4] = TexMan.CheckForTexture("F1R1A0",TexMan.Type_Sprite);
}

 TextureID tex[5];

States
 {
 Spawn:
 TNT1 A 0;
 TNT1 A 0
 {
		A_SpawnParticleEx
		(
		"ff9d1c",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 300,
		zoff: 50,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		for(int i=2;i>0;i--)
		A_SpawnParticleEx
		(
		"ff9d1c",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 300,
		zoff: 10,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
	}
 TNT1 A 0 A_StartSound("TeleportSound",CHAN_5,CHANF_DEFAULT,0.9);
  TNT1 A 0 A_StartSound("PM/DemonTeleFire",CHAN_7,CHANF_DEFAULT,0.5);
 TNT1 A 0 A_SpawnItemEx("PM_TeleSummonCircle",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION);
 TNT1 AAAAAAAAAAAAAAAAAAA 0
	{
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	}
 TNT1 A 0
	{
	A_SpawnParticleEx
	    (
		"ffaa0d",
		tex[2],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 86,
		size: 4,
		zoff: 53,
		startalphaf: 0.6,
		fadestepf: -1,
		sizestep: 2,
		startroll: 180
		);
	}
 DB26 ABCDEFGHIJK 1 BRIGHT Light("YellowMediumFlicker2")
 {
	A_SpawnParticleEx
	    (
		"ff7d12",
		tex[3],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(50,90),
		size: frandom(15,50),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(30,65),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(-1,1),
		startalphaf: frandom(0.05,0.7),
		fadestepf: -1,
		sizestep: frandom(0.2,6),
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[4],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(70,120),
		size: frandom(60,90),
		xoff: random(-20,20),
		yoff: random(-20,20),
		zoff: frandom(0,5),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(1,4),
		startalphaf: frandom(0.4,0.7),
		fadestepf: -0.02,
		sizestep: frandom(-2,-4),
		startroll: random(-180,180),
		rollvel: frandom(-0.3,0.3)
		);
	A_SpawnParticleEx
	    (
		"ff4d12",
		tex[3],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(50,300),
		size: frandom(15,50),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,15),
		velx: frandom(-2,2),
		vely: frandom(-2,2),
		velz: 0,
		startalphaf: frandom(0.1,0.4),
		fadestepf: -1,
		sizestep: 3,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(100,430),
		zoff: 50,
		startalphaf: frandom(0.1,0.5),
		startroll: random(-180,180)
		);
	}
TNT1 AAA 0
{
A_SpawnParticleEx
	    (
		"9e1f15",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,4000),
		size: frandom(15,120),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,45),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: 0,
		startalphaf: frandom(0.05,0.4),
		fadestepf: -1,
		sizestep: 2,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
}
 DB26 LMMNOPQRSTUV 2 BRIGHT Light("YellowMediumFlicker1")
{
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(50,230),
		zoff: 50,
		startalphaf: frandom(0.1,0.5),
		startroll: random(-180,180)
		);
	}
 TNT1 A 0 A_StartSound("TeleportVoices",CHAN_6,CHANF_DEFAULT,0.35);
 Stop;
 }
}

class PM_SmallDemonicTeleportFog : Actor
{
Default
{
Alpha 1;
XScale 1.3;
YScale 1.1;
SeeSound "";
Translation "0:255=%[0,0,0]:[1.8,1.4,0.3]";
DeathSound "";
+NOBLOCKMAP
+NOGRAVITY
+NOTELEPORT
+ZDOOMTRANS
RenderStyle "Add";
}

override void PostBeginPlay()
{
 Super.PostBeginPlay();
 tex[0] = TexMan.CheckForTexture("DTPRR0",TexMan.Type_Sprite);
 tex[1] = TexMan.CheckForTexture("SPKOA0",TexMan.Type_Sprite);
 tex[2] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
 tex[3] = TexMan.CheckForTexture("F1R1A0",TexMan.Type_Sprite);
}

 TextureID tex[4];
 
States
 {
 Spawn:
 TNT1 A 0;
 TNT1 A 0
 {
		A_SpawnParticleEx
		(
		"ff9d1c",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 300,
		zoff: 10,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		A_SpawnParticleEx
		(
		"ff9d1c",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 300,
		zoff: 10,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
	}
  TNT1 A 0 A_StartSound("PM/DemonTeleFire",CHAN_7,CHANF_DEFAULT,0.4);
 TNT1 AAAAAAAAAAAAAAAAAAA 0
	{
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	}
 TNT1 ABCDEFGHIJK 1 BRIGHT Light("YellowMediumFlicker2")
 {
	A_SpawnParticleEx
	    (
		"",
		tex[3],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(70,120),
		size: frandom(60,90),
		xoff: random(-20,20),
		yoff: random(-20,20),
		zoff: frandom(0,5),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(1,4),
		startalphaf: frandom(0.4,0.7),
		fadestepf: -0.02,
		sizestep: frandom(-2,-4),
		startroll: random(-180,180),
		rollvel: frandom(-0.3,0.3)
		);
	A_SpawnParticleEx
	    (
		"ff4d12",
		tex[2],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(50,300),
		size: frandom(15,50),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,15),
		velx: frandom(-2,2),
		vely: frandom(-2,2),
		velz: 0,
		startalphaf: frandom(0.1,0.4),
		fadestepf: -1,
		sizestep: 3,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(100,430),
		zoff: frandom(2,40),
		startalphaf: frandom(0.1,0.5),
		startroll: random(-180,180)
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(100,430),
		zoff: frandom(2,40),
		startalphaf: frandom(0.1,0.5),
		fadestepf: 0,
		sizestep: 0,
		startroll: random(-180,180)
		);
	}
 TNT1 LMMNOPQRSTUV 2 BRIGHT Light("YellowMediumFlicker1")
{
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(100,430),
		zoff: frandom(2,40),
		startalphaf: frandom(0.1,0.5),
		fadestepf: 0,
		sizestep: 0,
		startroll: random(-180,180)
		);
	}
 Stop;
 }
}

//Gluttony Fog
class PM_GluttonyTeleportFog : Actor
{
Default
{
Alpha 1;
XScale 1.3;
YScale 1.1;
Translation "0:255=%[0,0,0]:[2.0,0.2,0.1]";
+NOBLOCKMAP
+NOGRAVITY
+NOTELEPORT
+ZDOOMTRANS
RenderStyle "Add";
}

 override void PostBeginPlay()
{
 Super.PostBeginPlay();
 tex[0] = TexMan.CheckForTexture("DTPRR0",TexMan.Type_Sprite);
 tex[1] = TexMan.CheckForTexture("SPKRA0",TexMan.Type_Sprite);
 tex[2] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
 tex[3] = TexMan.CheckForTexture("FIR1W0",TexMan.Type_Sprite);
}

 TextureID tex[4];

States
 {
 Spawn:
 TNT1 A 0;
 TNT1 A 0
 {
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 300,
		zoff: 20,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5),
		rollacc: 0
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 500,
		zoff: 10,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		A_SpawnParticleEx
		(
		"FF1C1C",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 500,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
	}
 TNT1 A 0 A_StartSound("TeleportSound",CHAN_5,CHANF_DEFAULT,0.8);
  TNT1 A 0 A_StartSound("PM/GluttonyTeleSplat",CHAN_7,CHANF_DEFAULT,0.5);
 TNT1 A 0 A_SpawnItemEx("PM_GluttonyTeleCircle",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION);
 TNT1 AAAAAAAAAAAAAAAAAAA 0
	{
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	}
 DB26 ABCDEFGHIJK 1 BRIGHT Light("PM_GluttonyTeleFlicker2")
 {
	A_SpawnParticleEx
	    (
		"FF1212",
		tex[2],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(50,90),
		size: frandom(15,50),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(30,65),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(-1,1),
		startalphaf: frandom(0.05,0.7),
		fadestepf: -1,
		sizestep: frandom(0.2,6),
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"760000",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(80,160),
		size: frandom(90,180),
		xoff: random(-15,15),
		yoff: random(-15,15),
		zoff: frandom(0,5),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(3,10),
		startalphaf: frandom(0.6,1),
		fadestepf: 0.03,
		sizestep: frandom(-4,-8),
		startroll: random(-180,180),
		rollvel: frandom(-0.3,0.3)
		);
	A_SpawnParticleEx
	    (
		"FF1212",
		tex[2],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(50,300),
		size: frandom(15,50),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,15),
		velx: frandom(-2,2),
		vely: frandom(-2,2),
		startalphaf: frandom(0.1,0.4),
		fadestepf: -1,
		sizestep: 3,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(200,530),
		zoff: 10,
		startalphaf: frandom(0.5,0.8),
		startroll: random(-180,180)
		);
	}
TNT1 AAA 0
{
A_SpawnParticleEx
	    (
		"9e1f15",
		tex[2],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,4000),
		size: frandom(15,120),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,45),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: 0,
		startalphaf: frandom(0.05,0.4),
		fadestepf: -1,
		sizestep: 2,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
}
 DB26 LMMNOPQRSTUV 2 BRIGHT Light("PM_GluttonyTeleFlicker1")
{
	A_SpawnParticleEx
	    (
		"760000",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(80,160),
		size: frandom(90,180),
		xoff: random(-15,15),
		yoff: random(-15,15),
		zoff: frandom(0,5),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(3,10),
		startalphaf: frandom(0.6,1),
		fadestepf: 0.03,
		sizestep: frandom(-4,-8),
		startroll: random(-180,180),
		rollvel: frandom(-0.3,0.3)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(50,230),
		zoff: 10,
		startalphaf: frandom(0.4,0.8),
		startroll: random(-180,180)
		);
	}
 TNT1 A 0 A_StartSound("PM/GluttonyTeleVoice",CHAN_6,CHANF_DEFAULT,0.4);
 Stop;
 }
}

//Lust Fog
Class PM_LustTeleportFog : PMMonsterBase
{
Default
{
Alpha 1;
XScale 1.3;
YScale 1.1;
Translation "0:255=%[0,0,0]:[2.0,0.2,0.1]";
-ISMONSTER
-COUNTKILL
+NOBLOCKMAP
+NOGRAVITY
+NOTELEPORT
+ZDOOMTRANS
RenderStyle "Add";
}

 override void PostBeginPlay()
{
 Super.PostBeginPlay();
 tex[0] = TexMan.CheckForTexture("DTPRR0",TexMan.Type_Sprite);
 tex[1] = TexMan.CheckForTexture("SPKRA0",TexMan.Type_Sprite);
 tex[2] = TexMan.CheckForTexture("DB26X0",TexMan.Type_Sprite);
 tex[3] = TexMan.CheckForTexture("GNSML0",TexMan.Type_Sprite);
 tex[4] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
 tex[5] = TexMan.CheckForTexture("SPKOP0",TexMan.Type_Sprite);
}

 TextureID tex[6];

States
 {
 Spawn:
 TNT1 A 0;
 TNT1 A 0
 {
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 500,
		zoff: 50,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 400,
		zoff: 10,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 6,
		size: 300,
		zoff: 10,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5),
		rollacc: 0
		);
	}
 TNT1 A 0 A_StartSound("PM/LustTele",CHAN_5,CHANF_DEFAULT,0.8);
  TNT1 A 0 A_StartSound("PM/DemonTeleFire",CHAN_7,CHANF_DEFAULT,0.25);
 TNT1 A 0 A_SpawnItemEx("PM_LustTeleCircle",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION);
 TNT1 AAAAAAAAAAAAAAAAAAA 0
	{
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		zoff: 0,
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	}
 TNT1 A 0
	{
	A_SpawnParticleEx
	    (
		"ff0000",
		tex[2],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 85,
		size: 3,
		zoff: 53,
		startalphaf: 0.8,
		fadestepf: -1,
		sizestep: 1.1,
		startroll: 180
		);
	}
 DB26 ABCDEFGHIJK 1 BRIGHT Light("PM_LustTeleFlicker2")
 {
	PM_ChargeParticles(self,5,frandom(60,300),(0,0,50),TexMan.CheckForTexture("SPKPA0"));
	A_SpawnItemEx("PM_LustTeleportBabySouls",0,0,50,frandom(-0.1,0.1),frandom(-0.1,0.1),frandom(-0.1,0.1),0,0,220);
	A_SpawnParticleEx
	    (
		"",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,90),
		size: frandom(15,70),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(30,65),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(-1,1),
		startalphaf: frandom(0.1,0.6),
		fadestepf: -1,
		sizestep: frandom(0.2,6),
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"000000",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(60,120),
		size: random(100,180),
		xoff: frandom(-6,6),
		yoff: frandom(-6,6),
		zoff: 0,
		velz: frandom(0.3,3),
		startalphaf: frandom(0.1,0.4),
		fadestepf: -1,
		sizestep: frandom(-5,5),
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,300),
		size: frandom(15,130),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,15),
		velx: frandom(-2,2),
		vely: frandom(-2,2),
		velz: 0,
		startalphaf: frandom(0.1,0.5),
		fadestepf: -1,
		sizestep: 3,
		startroll: random(-180,180),
		rollvel: frandom(-0.3,0.3)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		zoff: 0,
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
		A_SpawnParticleEx
		(
		"E800FF",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 2,
		size: frandom(200,530),
		zoff: 50,
		startalphaf: frandom(0.8,0.9),
		startroll: random(-180,180)
		);
		A_SpawnParticleEx
		(
		"E800FF",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 2,
		size: frandom(200,530),
		zoff: 50,
		startalphaf: frandom(0.6,0.8),
		startroll: random(-180,180)
		);
	}
TNT1 AAA 0
{
A_SpawnParticleEx
	    (
		"9e1f15",
		tex[4],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,4000),
		size: frandom(15,120),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,45),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: 0,
		startalphaf: frandom(0.05,0.4),
		fadestepf: -1,
		sizestep: 2,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
}
 DB26 LMMNOPQRSTUV 2 BRIGHT Light("PM_LustTeleFlicker1")
{
	A_SpawnParticleEx
	    (
		"000000",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(60,120),
		size: random(100,180),
		xoff: frandom(-6,6),
		yoff: frandom(-6,6),
		zoff: 0,
		velz: frandom(0.3,3),
		startalphaf: frandom(0.1,0.5),
		fadestepf: -1,
		sizestep: frandom(-5,5),
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[5],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(5,200),
		size: frandom(0.2,10),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(30,65),
		velx: frandom(-0.5,0.5),
		vely: frandom(-0.5,0.5),
		velz: frandom(-0.5,0.5),
		accelx: frandom(-0.05,0.05),
		accely: frandom(-0.05,0.05),
		accelz: frandom(-0.05,0.05),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.05,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		zoff: 0,
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	A_SpawnParticleEx
		(
		"E800FF",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(200,530),
		zoff: 50,
		startalphaf: frandom(0.6,0.8),
		startroll: random(-180,180)
		);
		A_SpawnParticleEx
		(
		"E800FF",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 2,
		size: frandom(200,530),
		zoff: 50,
		startalphaf: frandom(0.6,0.8),
		startroll: random(-180,180)
		);
	}
 TNT1 A 50;
 TNT1 A 0 A_StartSound("PM/LustTeleVoice",CHAN_6,CHANF_DEFAULT,0.80);
 Stop;
 }
}

//Envy Teleport
Class PM_EnvyTeleportFog : Actor
{
Default
{
Alpha 1;
XScale 1;
YScale 1;
Height 2;
+NOBLOCKMAP
+NOINTERACTION
+NOGRAVITY
+NOTELEPORT
+ZDOOMTRANS
Translation "0:255=%[0,0,0]:[0.7,1.9,0.0]";
RenderStyle "Add";
}

 override void PostBeginPlay()
 {
  Super.PostBeginPlay();
  tex[0] = TexMan.CheckForTexture("PLAGC0",TexMan.Type_Sprite);
  tex[1] = TexMan.CheckForTexture("SPKOG0",TexMan.Type_Sprite);
  tex[2] = TexMan.CheckForTexture("DTPRA0",TexMan.Type_Sprite);
  tex[3] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
  tex[4] = TexMan.CheckForTexture("GRNLA0",TexMan.Type_Sprite);
 }
 
 TextureID tex[5];

States
 {
 Spawn:
 TNT1 A 0;
 TNT1 A 0 A_StartSound("PM/NormalTeleport",CHAN_6);
 TNT1 A 0 A_StartSound("PM/EnvyTele",CHAN_5,CHANF_DEFAULT,0.4);
 TNT1 A 0 A_SpawnItemEx("PM_EnvyTeleCircle",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION);
 TNT1 A 0
 {
	A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 8,
		size: 300,
		zoff: 50,
		startalphaf: 1,
		fadestepf: -1,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		A_SpawnParticleEx
		(
		"a2ff00",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 8,
		size: 250,
		zoff: 50,
		startalphaf: 0.7,
		fadestepf: -1,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		A_SpawnParticleEx
		(
		"",
		tex[2],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 4,
		size: 800,
		zoff: 50,
		startalphaf: 0.7,
		fadestepf: -1,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
	}
 TNT1 AAAAAAAAAAAAAAA 0
	{
	A_SpawnParticleEx
	    ( "a2ff00", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(20,80),
		size: frandom(10,30), xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65),
		velx: frandom(-4,4), vely: frandom(-4,4), velz: frandom(-4,4), startalphaf: 0.7, fadestepf: -1,
		sizestep: frandom(-0.3,-3), startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	A_SpawnParticleEx
	    ( "a2ff00", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,100),
		size: frandom(0.2,15), xoff: random(-30,30), yoff: random(-30,30), velx: frandom(-0.2,0.2), vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3), accelx: frandom(-0.02,0.02), accely: frandom(-0.02,0.02), accelz: frandom(-0.02,0.02),
		startalphaf: 1.0, fadestepf: -1, sizestep: -0.5, startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	}
 DB26 ABCDEFGHIJK 1 BRIGHT Light("PM_GTeleMediumFlicker2")
	{
	A_SpawnParticleEx
	    (
		"",
		tex[4],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(1,3),
		size: random(10,100),
		angle: 0,
		xoff: frandom(-8,8),
		yoff: frandom(-8,8),
		zoff: frandom(0,50),
		velx: frandom(-2,2),
		vely: frandom(-2,2),
		velz: frandom(-2,2),
		accelx: 0,
		accely: 0,
		accelz: 0,
		startalphaf: frandom(0.0,0.9),
		fadestepf: 0,
		sizestep: 0,
		startroll: random(-180,180),
		rollvel: frandom(-5,5),
		rollacc: 0
	    );
	A_SpawnParticleEx
		( "", tex[2], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 1, size: frandom(100,430),
		zoff: 50, startalphaf: frandom(0.1,0.5), startroll: random(-180,180) );
	A_SpawnParticleEx
	    ( "a2ff00", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,400), size: frandom(0.2,10),
		xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65), velx: frandom(-0.5,0.5), vely: frandom(-0.5,0.5),
		velz: frandom(-0.5,0.5), accelx: frandom(-0.05,0.05), accely: frandom(-0.05,0.05), accelz: frandom(-0.05,0.05), startalphaf: 1.0,
		fadestepf: -1, sizestep: -0.05, startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
	A_SpawnParticleEx
	    ( "a2ff00", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,100), size: frandom(0.2,15),
		xoff: random(-30,30), yoff: random(-30,30), velx: frandom(-0.2,0.2), vely: frandom(-0.2,0.2), velz: frandom(0.5,3), accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02), accelz: frandom(-0.02,0.02), startalphaf: 1.0, fadestepf: -1, sizestep: -0.5, startroll: random(-180,180), rollvel: frandom(-10,10),
		rollacc: frandom(-1,1) );
	A_SpawnParticleEx
	    ( "12ff22", tex[3], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(50,90), size: frandom(15,50), xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65),
		velx: frandom(-1,1), vely: frandom(-1,1), velz: frandom(-1,1), startalphaf: frandom(0.05,0.5), fadestepf: -1,
		sizestep: frandom(0.2,6), startroll: random(-180,180), rollvel: frandom(-0.1,0.1) );
	}
 TNT1 AAA 0
    {
	A_SpawnParticleEx
	    (
		"000000",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,4000),
		size: frandom(15,120),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,45),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: 0,
		startalphaf: frandom(0.05,0.4),
		fadestepf: -1,
		sizestep: 2,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
    }
 DB26 LMMNOPQRSTUV 2 BRIGHT Light("PM_GTeleMediumFlicker1")
	{
	A_SpawnParticleEx
	    (
		"",
		tex[4],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(1,3),
		size: random(10,140),
		angle: 0,
		xoff: frandom(-20,20),
		yoff: frandom(-20,20),
		zoff: frandom(0,70),
		velx: frandom(-2,2),
		vely: frandom(-2,2),
		velz: frandom(-2,2),
		accelx: 0,
		accely: 0,
		accelz: 0,
		startalphaf: frandom(0.0,0.9),
		fadestepf: 0,
		sizestep: 0,
		startroll: random(-180,180),
		rollvel: frandom(-5,5),
		rollacc: 0
	    );
	A_SpawnParticleEx
	    (
		"000000",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,300),
		size: frandom(15,130),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,15),
		velx: frandom(-2,2),
		vely: frandom(-2,2),
		velz: 0,
		startalphaf: frandom(0.1,0.5),
		fadestepf: -1,
		sizestep: 3,
		startroll: random(-180,180),
		rollvel: frandom(-0.3,0.3)
		);
	A_SpawnParticleEx
		( "", tex[2], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 1,
		size: frandom(70,200), zoff: 50, startalphaf: frandom(0.1,0.5), startroll: random(-180,180) );
	A_SpawnParticleEx
	    ( "a2ff00", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(5,200), size: frandom(0.2,10),
		xoff: random(-10,10), yoff: random(-10,10), zoff: frandom(30,65), velx: frandom(-0.5,0.5), vely: frandom(-0.5,0.5),
		velz: frandom(-0.5,0.5), accelx: frandom(-0.05,0.05), accely: frandom(-0.05,0.05), accelz: frandom(-0.05,0.05), startalphaf: 1.0,
		fadestepf: -1, sizestep: -0.05, startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
		A_SpawnParticleEx
	    ( "a2ff00", tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(10,100), size: frandom(0.2,15),
		xoff: random(-30,30), yoff: random(-30,30), velx: frandom(-0.2,0.2), vely: frandom(-0.2,0.2), velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02), accely: frandom(-0.02,0.02), accelz: frandom(-0.02,0.02), startalphaf: 1.0, fadestepf: -1, sizestep: -0.5,
		startroll: random(-180,180), rollvel: frandom(-10,10), rollacc: frandom(-1,1) );
		}
 Stop;
 }
}

//Wrath Teleport
class PM_WrathTeleportFog : Actor
{
Default
{
Alpha 1;
XScale 1.3;
YScale 1.1;
Translation "0:255=%[0,0,0]:[1.9,1.2,0.0]";
+NOBLOCKMAP
+NOGRAVITY
+NOTELEPORT
+ZDOOMTRANS
RenderStyle "Add";
}

override void PostBeginPlay()
{
 Super.PostBeginPlay();
 tex[0] = TexMan.CheckForTexture("SPKOB0",TexMan.Type_Sprite);
 tex[1] = TexMan.CheckForTexture("SPKOA0",TexMan.Type_Sprite);
 tex[2] = TexMan.CheckForTexture("DB26W0",TexMan.Type_Sprite);
 tex[3] = TexMan.CheckForTexture("GNSML0",TexMan.Type_Sprite);
 tex[4] = TexMan.CheckForTexture("F1R1A0",TexMan.Type_Sprite);
 tex[5] = TexMan.CheckForTexture("DUSTC0",TexMan.Type_Sprite);
}

 TextureID tex[6];

States
 {
 Spawn:
 TNT1 A 0;
 TNT1 A 0
 {
		A_SpawnParticleEx
		(
		"ff9d1c",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 10,
		size: 1000,
		zoff: 50,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: -20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
		for(int i=2;i>0;i--)
		A_SpawnParticleEx
		(
		"ff9d1c",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 10,
		size: 700,
		zoff: 10,
		startalphaf: 1,
		fadestepf: -1,
		sizestep: 20,
		startroll: random(-180,180),
		rollvel: frandom(-5,5)
		);
	}
 TNT1 A 0 A_StartSound("PM/WrathTele1",23,CHANF_DEFAULT,1);
 TNT1 A 0 A_StartSound("PM/WrathTele2",25,CHANF_DEFAULT,1);
 //TNT1 A 0 A_StartSound("PM/DemonTeleFire",CHAN_7,CHANF_DEFAULT,0.3);
 TNT1 A 0 Radius_Quake (2, 54, 0, 7, 0);
 TNT1 AAA 0 A_SpawnItemEx("PM_LavaMeatChunk",0,0,0,frandom(-8,8),frandom(-8,8),frandom(0,8),0,SXF_NOCHECKPOSITION,150);
 TNT1 A 0 A_SpawnItemEx("PM_WrathSummonCircle",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION);
 TNT1 AAA 0 A_SpawnItemEx("PM_WrathTeleExplosionFlames",0,0,50,frandom(-2,2),frandom(-2,2),frandom(-2,2),0,SXF_NOCHECKPOSITION);
 TNT1 AAAAAAAAAAAAAAAAAAA 0
	{
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	A_SpawnParticleEx
		(
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(80,120),
		size: frandom(1,15),
		zoff: random(10,60),
		velx: random(-6,6),
		vely: random(-6,6),
		velz: random(0,8),
		accelz: frandom(-0.2,-0.8),
		startalphaf: 1,
		fadestepf: 0,
		sizestep: -0.2,
		startroll: random(-180,180),
		rollvel: random(-2,2)
		);
	A_SpawnParticleEx
	    ( "727272", tex[5], style: STYLE_Normal, flags: SPF_RELATIVE|SPF_ROLL,
	    lifetime: random(40,70), size: frandom(1,22), zoff: random(10,35),
	    velx: frandom(-7,7), vely: frandom(-7,7), velz: frandom(1,12),
	    accelz: frandom(-0.1,-0.9), startalphaf: 1.0, sizestep: -0.2, startroll: random(-180,180), rollvel: random(-4,4));
	}
 TNT1 AAAAAAAAAAA 1 BRIGHT Light("YellowMediumFlicker2")
 {
	A_SpawnParticleEx
		(
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(80,120),
		size: frandom(1,30),
		zoff: random(10,60),
		velx: random(-8,8),
		vely: random(-8,8),
		velz: random(0,10),
		accelz: frandom(-0.2,-0.4),
		startalphaf: 1,
		fadestepf: 0,
		sizestep: -0.2,
		startroll: random(-180,180),
		rollvel: random(-2,2)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,90),
		size: frandom(15,50),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(30,65),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(-1,1),
		startalphaf: frandom(0.05,0.7),
		fadestepf: -1,
		sizestep: frandom(0.2,6),
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[4],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(70,120),
		size: frandom(60,90),
		xoff: random(-20,20),
		yoff: random(-20,20),
		zoff: frandom(0,5),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: frandom(1,4),
		startalphaf: frandom(0.4,0.7),
		fadestepf: -0.02,
		sizestep: frandom(-2,-4),
		startroll: random(-180,180),
		rollvel: frandom(-0.3,0.3)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,300),
		size: frandom(15,50),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,15),
		velx: frandom(-2,2),
		vely: frandom(-2,2),
		velz: 0,
		startalphaf: frandom(0.1,0.4),
		fadestepf: -1,
		sizestep: 3,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
		A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(100,430),
		zoff: 50,
		startalphaf: frandom(0.1,0.5),
		startroll: random(-180,180)
		);
	}
	TNT1 AAA 0
	{
	A_SpawnParticleEx
	    (
		"",
		tex[3],
		style: STYLE_Translucent,
		flags: SPF_RELATIVE|SPF_ROLL,
		lifetime: random(50,4000),
		size: frandom(15,120),
		xoff: random(-10,10),
		yoff: random(-10,10),
		zoff: frandom(0,45),
		velx: frandom(-1,1),
		vely: frandom(-1,1),
		velz: 0,
		startalphaf: frandom(0.05,0.4),
		fadestepf: -1,
		sizestep: 2,
		startroll: random(-180,180),
		rollvel: frandom(-0.1,0.1)
		);
	}
	TNT1 AAAAAAAAAAAA 2 BRIGHT Light("YellowMediumFlicker1")
	{
	A_SpawnParticleEx
	    (
		"",
		tex[1],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(10,100),
		size: frandom(1,25),
		xoff: random(-30,30),
		yoff: random(-30,30),
		velx: frandom(-0.2,0.2),
		vely: frandom(-0.2,0.2),
		velz: frandom(0.5,3),
		accelx: frandom(-0.02,0.02),
		accely: frandom(-0.02,0.02),
		accelz: frandom(-0.02,0.02),
		startalphaf: 1.0,
		fadestepf: -1,
		sizestep: -0.5,
		startroll: random(-180,180),
		rollvel: frandom(-10,10),
		rollacc: frandom(-1,1)
		);
	A_SpawnParticleEx
		(
		"",
		tex[0],
		style: STYLE_Add,
		flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: 1,
		size: frandom(50,230),
		zoff: 50,
		startalphaf: frandom(0.1,0.5),
		startroll: random(-180,180)
		);
	}
 TNT1 A 0 A_StartSound("PM/WrathTeleVoice",CHAN_6,CHANF_DEFAULT,0.35);
 Stop;
 }
}

Class PM_PrideTeleportFog : Actor
{
	Default
	{
	Alpha 1;
	XScale 2;
	YScale 4.3;
	Height 2;
	+NOBLOCKMAP
	+NOINTERACTION
	+NOGRAVITY
	+NOTELEPORT
	+ZDOOMTRANS
	Translation "0:255=%[0.00,0.00,0.00]:[2.00,0.4,0.4]";
	RenderStyle "Add";
	}
	
	override void PostBeginPlay()
	{
		Super.PostBeginPlay();
		tex[0] = TexMan.CheckForTexture("SPKRA0",TexMan.Type_Sprite);
		tex[1] = TexMan.CheckForTexture("BLHDA0",TexMan.Type_Sprite);
		tex[2] = TexMan.CheckForTexture("DUSTC0",TexMan.Type_Sprite);
		tex[3] = TexMan.CheckForTexture("GNSML0",TexMan.Type_Sprite);
	}
	
	textureID tex[4];
	
	States
	{
	Spawn:
		TNT1 A 0 NoDelay
		{
			Spawn("PM_PrideTeleBeacon", Vec3Offset(0, 0, 0));
			Spawn("PM_PrideTeleCircle2", Vec3Offset(0, 0, 1));
			A_SpawnItemEx("PM_PrideTeleCircle", flags: SXF_NOCHECKPOSITION);
			A_SpawnParticleEx("ff2424", TexMan.CheckForTexture("C1TEA0"), style: STYLE_ADD, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 50, size: 50, zoff: 10, startalphaf: .6, fadestepf: -.6, sizestep: 25, startroll: 180, rollvel: -5);
			A_SpawnParticleEx("", TexMan.CheckForTexture("DTPRR0"), style: STYLE_Add, flags: SPF_FULLBRIGHT|SPF_RELATIVE|SPF_ROLL, lifetime: 10, size: 400, xoff: -20, yoff: random(-30,30), zoff: random(0,60), startalphaf: 1, fadestepf: -1, sizestep: -40, startroll: random(-180,180));
			A_StartSound("PM/PrideTele",CHAN_5,CHANF_DEFAULT);
			A_StartSound((!random(0, 1)) ? "Depraved/SuperShock1" : "Depraved/SuperShock2",CHAN_7,CHANF_DEFAULT,.75,0.8,1.55);
			A_QuakeEx(3,3,0,30,0,1200,"",QF_RELATIVE|QF_SCALEDOWN|QF_3D,rollintensity:0.8,rollwave:0.8);
			for(int i=4;i>0;i--)
			A_SpawnItemEx("PM_BigFireGlobs",0,0,0,random(-5,5),random(-5,5),random(-1,5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION);
			A_SpawnParticleEx("801111", tex[3], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(50, 200), size: random(100, 200), zoff: -5, startalphaf: frandom(.5, 1), sizestep: 5, startroll: random(-180,180), rollvel: frandom(-4, 4));
			A_SpawnParticleEx("", tex[0], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 50, size: 600, zoff: -5, startalphaf: 1, sizestep: -50, startroll: random(-180,180), rollvel: frandom(-4, 4));
			for(int i=random(5,12);i>0;i--) A_SpawnParticleEx("727272", tex[2], style: STYLE_Normal, flags: SPF_RELATIVE|SPF_ROLL, lifetime: random(40,70), size: frandom(2,35), zoff: random(10,35), velx: frandom(-8,8), vely: frandom(-8,8), velz: frandom(1,12), accelz: frandom(-0.1,-0.9), startalphaf: 1.0, sizestep: -0.2, startroll: random(-180,180), rollvel: random(-4,4) );
		}
		SP4_ ABCD random(2, 3)
		{
		 if (!random(0, 1)) A_SpawnItemEx("PM_BigFireGlobs",0,0,0,random(-5,5),random(-5,5),random(-1,5),0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION);
		 A_SpawnParticleEx("801111", tex[3], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(50, 200), size: random(100, 200), zoff: -5, velx: frandom(-2, 2), vely: frandom(-2, 2), velz: frandom(1, 3), startalphaf: frandom(.2, .4), sizestep: 5, startroll: random(-180,180), rollvel: frandom(-4, 4));
		 scale.x += 0.05;
		 A_SpawnParticleEx("", tex[0], STYLE_Add, SPF_FULLBRIGHT|SPF_ROLL|SPF_RELATIVE, lifetime: random(5,45), size: random(5,25), xoff: frandom(-30,30), yoff: frandom(-30,30), zoff: frandom(0,25), velx: frandom(-1.5,1.5), vely: frandom(-1.5,1.5), velz: frandom(0,2), accelz: 0.005, startalphaf: 0.75, fadestepf: frandom(-0.01,-0.04), sizestep: -0.005, startroll: random(-180,180));
		 if(!random(0, 1)) A_SpawnParticleEx("e53737", tex[3], STYLE_Add, SPF_ROLL|SPF_RELATIVE, lifetime: 65, size: random(40,80), xoff: frandom(-20,20), yoff: frandom(-20,20), zoff: frandom(0,10), velx: frandom(-0.5,0.5), vely: frandom(-0.5,0.5), velz: frandom(0,2), startalphaf: frandom(0.6,1), fadestepf: -1, startroll: random(-180,180));
		}
		SP4_ EEEEFFFFF 1
		{
			A_SetScale(scale.x + 0.05);
			A_SpawnParticleEx("801111", tex[3], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(50, 200), size: random(100, 200), zoff: -5, velx: frandom(-2, 2), vely: frandom(-2, 2), velz: frandom(1, 3), startalphaf: frandom(.1, .4), sizestep: 5, startroll: random(-180,180), rollvel: frandom(-4, 4));
			A_FadeOut(0.1, FTF_CLAMP);
		}
		TNT1 A 0 A_StartSound("PM/PrideTeleVoice",CHAN_6,CHANF_DEFAULT,0.3);
		Stop;
	}
}

Class PM_PrideTeleBeacon : Actor
{
	Default
	{
	 XScale .15;
	 YScale 2.5;
	 Alpha 1;
	 RenderStyle "Add";
	 StencilColor "Red";
	 Translation "0:255=%[0.00,0.00,0.00]:[2.00,1.00,1.00]";
	 +BRIGHT
	 +NOINTERACTION
	}
 
	float destined;
	 
	override void PostBeginPlay()
	{
		Super.PostBeginPlay();
		tex[0] = TexMan.CheckForTexture("SPKRA0",TexMan.Type_Sprite);
		tex[1] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
	}
 
	TextureID tex[2];
 
	void BeaconFX()
	{
		scale.x += 0.005;
		
		if (!(GetAge() % random(1,2)))
		{
			if(!random(0, 12)) A_SpawnParticleEx("", tex[0], STYLE_Add, SPF_FULLBRIGHT|SPF_ROLL|SPF_RELATIVE, lifetime: random(15,200), size: random(5,15), xoff: frandom(-120,120), yoff: frandom(-120,120), zoff: frandom(0,25), velx: frandom(-2.5,2.5), vely: frandom(-2.5,2.5), velz: frandom(0,4), accelx: frandom(-0.05, 0.05), accely: frandom(-0.05, 0.05), accelz: frandom(-0.001, 0.05), startalphaf: frandom(0.65, 1), fadestepf: frandom(-0.01,-0.04), sizestep: -0.005, startroll: random(-180,180));
			if(!random(0, 4)) A_SpawnParticleEx("e53737", tex[1], STYLE_Add, SPF_ROLL|SPF_RELATIVE, lifetime: random(100, 200), size: random(150,250), xoff: frandom(-100,100), yoff: frandom(-100,100), zoff: frandom(0,10), velx: frandom(-0.5,0.5), vely: frandom(-0.5,0.5), velz: frandom(0,1.5), accelz: 0.04, startalphaf: frandom(.2,.4), fadestepf: -1, startroll: random(-180,180), rollvel: frandom(-2, 2));
		}
	}
	 
	States
	{
	Spawn:
		DI_A A 1 { A_FadeOut(0.075); BeaconFX(); }
		Wait;
	}
}

Class PM_PrideTeleCircle : Actor
{
	Default
	{
	+CLIENTSIDEONLY
	+NOINTERACTION
	+Bright
	Radius 20;
	Height 1;
	+NOBLOCKMAP
	+FLATSPRITE
	Scale 1;
	Alpha 1;
	Translation "0:255=%[0,0,0]:[2.0,0.0,0.0]";
	}
	
	override void PostBeginPlay()
	{
		Super.PostBeginPlay();
		tex[0] = TexMan.CheckForTexture("SPKRA0",TexMan.Type_Sprite);
		tex[1] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
	}
	
	override void Tick()
	{
		super.Tick();
		
		if (level.isFrozen()) return;
		angle += 1;
		A_SetScale(scale.x += 0.0025);
	}
	
	textureID tex[2];
	
	States
	{
	Spawn:
		C1TE AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 Bright
		{
			A_SpawnParticleEx("", tex[0], STYLE_Add, SPF_FULLBRIGHT|SPF_ROLL|SPF_RELATIVE, lifetime: random(5,65), size: random(5,25), xoff: frandom(-30,30), yoff: frandom(-30,30), zoff: frandom(0,25), velx: frandom(-1.5,1.5), vely: frandom(-1.5,1.5), velz: frandom(0,2), accelz: 0.005, startalphaf: 0.75, fadestepf: frandom(-0.01,-0.04), sizestep: -0.005, startroll: random(-180,180));
			if(!random(0, 1)) A_SpawnParticleEx("e53737", tex[1], STYLE_Add, SPF_ROLL|SPF_RELATIVE, lifetime: 100, size: random(50,200), xoff: frandom(-40,40), yoff: frandom(-40,40), zoff: frandom(0,10), velx: frandom(-0.5,0.5), vely: frandom(-0.5,0.5), velz: frandom(0,2), startalphaf: frandom(0.6,1), fadestepf: -1, startroll: random(-180,180));
		}
	Spawned:
		C1TE A 100 Bright;
	Fade:
		C1TE A 5 Bright A_FadeOut(0.1);
		Loop;
    }
}

Class PM_PrideTeleCircle2 : PM_PrideTeleCircle
{	
	override void Tick()
	{
		super.Tick();
		
		if (level.isFrozen()) return;
		angle += 6;
		A_SetScale(scale.x += 0.15);
	}
	
	States
	{
	Spawn:
		C1TE A 1 Bright A_FadeOut(0.075);
		Loop;
    }
}

//Sin-Specific Actors
Class PM_WrathIreActivate : Actor
{
  Default
  {
	+NOGRAVITY
  }
  
  States
  {
  Spawn:
  TNT1 A 0 nodelay
  {
	A_StartSound("Exile/Immolate", 10, volume: 0.5);
	A_SpawnParticleEx
		(   
		"",
		TexMan.CheckForTexture("EXN1B0"), style: STYLE_Add, flags: SPF_ROLL|SPF_RELATIVE|SPF_FULLBRIGHT,
		lifetime: 30, size: 150, xoff: -15, startalphaf: 1, fadestepf: -1, sizestep: 15, startroll: random(-180,180)
		);
    for(int i=15;i>0;i--)
	A_SpawnParticleEx
		(
		"ffb521",
		TexMan.CheckForTexture("F1R1A0"),
		style: STYLE_Add, flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,
		lifetime: random(10,100), size: frandom(10,80), xoff: random(-15,15), yoff: random(-15,15),
		zoff: random(0,25), velx: frandom(-3,3), vely: frandom(-3,3), velz: frandom(-0.5,3),
		startalphaf: frandom(0.1,0.9), fadestepf: -0.5, sizestep: frandom(0.0,1.4), startroll: random(-180,180),
		rollvel: frandom(-1,1)
		);
	for(int i=random(10,15);i>0;i--)
	A_SpawnParticleEx
	 (
		"",
		TexMan.CheckForTexture("SPKOA0"), style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(1,60), size: frandom(0.2,15), xoff: random(-25,25), yoff: random(-25,25),
		zoff: random(0,15), velx: frandom(-0.6,0.6), vely: frandom(-0.6,0.6), velz: frandom(0,0.6),
		accelz: frandom(0.015,0.075), startalphaf: 1.0, fadestepf: -0.5, sizestep: -0.2, startroll: random(-180,180)
	 );
	for (int i = random(10, 15); i > 0; i--)
	{
		A_SpawnParticleEx
		(
		 "ff4d12",
		 TexMan.CheckForTexture("GNSMK0"),
		 style: STYLE_Add,
		 flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		 lifetime: random(50,150),
		 size: frandom(15,50),
		 xoff: random(-10,10),
		 yoff: random(-10,10),
		 zoff: frandom(0,15),
		 velx: frandom(-2,2),
		 vely: frandom(-2,2),
		 startalphaf: frandom(0.1,0.4),
		 fadestepf: -1,
		 sizestep: 3,
		 startroll: random(-180,180),
		 rollvel: frandom(-0.1,0.1)
		 );
	 }
  }
  TNT1 AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1
  {
	A_SpawnParticleEx
		(
		 "ff4d12",
		 TexMan.CheckForTexture("GNSMK0"),
		 style: STYLE_Add,
		 flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		 lifetime: random(50,150),
		 size: frandom(15,50),
		 xoff: random(-10,10),
		 yoff: random(-10,10),
		 zoff: frandom(0,15),
		 velx: frandom(-2,2),
		 vely: frandom(-2,2),
		 startalphaf: frandom(0.1,0.4),
		 fadestepf: -1,
		 sizestep: 3,
		 startroll: random(-180,180),
		 rollvel: frandom(-0.1,0.1)
		 );
	A_SpawnParticleEx
	 (
		"",
		TexMan.CheckForTexture("SPKOA0"), style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
		lifetime: random(1,60), size: frandom(0.2,15), xoff: random(-25,25), yoff: random(-25,25),
		zoff: random(0,15), velx: frandom(-0.6,0.6), vely: frandom(-0.6,0.6), velz: frandom(0,0.6),
		accelz: frandom(0.015,0.075), startalphaf: 1.0, fadestepf: -0.5, sizestep: -0.2, startroll: random(-180,180)
	 );
  }
  Stop;
  }
}

Class PM_WrathIreEffect : Actor
{
Default
{
+NOGRAVITY
}
  States
  {
  Spawn:
  TNT1 A 0 NoDelay;
  TNT1 A 1
  {
	A_SpawnParticleEx
	(
	"ff4d12",
	TexMan.CheckForTexture("GNSMK0"),
	style: STYLE_Add,
	flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
	lifetime: random(50,150),
	size: frandom(35,70),
	xoff: (master) ? frandom(-master.radius, master.radius) : frandom(-10,10),
	yoff: (master) ? frandom(-master.radius, master.radius) : frandom(-7,7),
	zoff: (master) ? frandom(0, master.height) : frandom(-10,16),
	velx: frandom(-0.6,0.6),
	vely: frandom(-0.6,0.6),
	velz: frandom(-0.6,0.6),
	startalphaf: frandom(0.05,0.137),
	fadestepf: -1,
	sizestep: 3,
	startroll: random(-180,180),
	rollvel: frandom(-0.1,0.1)
	);
	if (!random(0, 2))
	{
	A_SpawnParticleEx
    (
	"",
    TexMan.CheckForTexture("SPKOA0"),
	style: STYLE_Add,
	flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,
	lifetime: random(1,70),
	size: frandom(0.2,15),
	xoff: (master) ? frandom(-master.radius, master.radius) : frandom(-10,10),
	yoff: (master) ? frandom(-master.radius, master.radius) : frandom(-7,7),
    zoff: (master) ? frandom(0, master.height) : frandom(-10,16),
	velx: frandom(-0.6,0.6),
	vely: frandom(-0.6,0.6),
	velz: frandom(-0.6,0.6),
	startalphaf: 1.0,
	fadestepf: -0.5,
	sizestep: -0.2,
	startroll: random(-180,180)
	);
	A_SpawnParticleEx
	(
	"",
	TexMan.CheckForTexture("GNSML0"),
	style: STYLE_None,
	flags: SPF_ROLL|SPF_RELATIVE,
	lifetime: random(45,125),
     size: random(30,76),
	xoff: (master) ? frandom(-master.radius, master.radius) : frandom(-10,10),
	yoff: (master) ? frandom(-master.radius, master.radius) : frandom(-7,7),
     zoff: (master) ? frandom(0, master.height) : frandom(-10,16),
	velx: frandom(-0.6,0.6),
	vely: frandom(-0.6,0.6),
	velz: frandom(1,3),
	startalphaf: 0.125,
	fadestepf: -1,
	startroll: random(-180,180)
	);
	}
	A_SpawnParticleEx
	(
	 "ff9a31",
	 TexMan.CheckForTexture("GNSML0"),
	 style: STYLE_Add,
	 flags: SPF_ROLL|SPF_RELATIVE|SPF_FULLBRIGHT,
	 lifetime: random(45,95),
     size: frandom(30,76),
	 xoff: (master) ? frandom(-master.radius, master.radius) : frandom(-10,10),
	 yoff: (master) ? frandom(-master.radius, master.radius) : frandom(-7,7),
     zoff: (master) ? frandom(0, master.height) : frandom(-10,16),
	 velx: frandom(-0.6,0.6),
	 vely: frandom(-0.6,0.6),
	 velz: frandom(1,3),
	 startalphaf: 0.1,
	 fadestepf: -1,
	 startroll: random(-180,180)
	 );
    }
    Goto Spawn+1;
	}

  override void PostBeginPlay()
  {
  A_Warp(AAPTR_MASTER,0,0,0,0,WARPF_INTERPOLATE);
  }

  override void Tick()
  {
  Super.Tick(); 
  A_Warp(AAPTR_MASTER,0,0,0,0,WARPF_NOCHECKPOSITION|WARPF_INTERPOLATE); 
  }

}

Class PM_EnvySigil : Actor
{
  Default
  {
  StencilColor "Green";
  Scale 1.1;
  Alpha 0.55;
  +FLATSPRITE
  +NOINTERACTION
  +BRIGHT;
  Translation "0:255=%[0,0,0]:[0.3,2.0,0.1]";
  }

  override void PostBeginPlay()
	{
	if(master)
		{
		master.A_StartSound("Draugr/BuffStart",10,volume:0.35,pitch:0.65);
		master.A_StartSound("Envy/SigilSummon",11,volume:0.5,pitch:frandom(0.7,1.2));
		for(int a=0;a<20;a++)
		A_SpawnParticle
		(
		"80FF38",
		flags: SPF_RELATIVE|SPF_FULLBRIGHT,
		lifetime: random(20,40),
		size: random(75,80),
		xoff: random(-20,20),
		yoff: random(-40,40),
		zoff: random(20,50),
		velx: random(-10,10),
		vely: random(-10,10),
		velz: random(-10,10)
		);
		}
	Super.PostBeginPlay();
	pitch = 270;
	}
	
  override void Tick()
  {
	Super.Tick();
	A_Warp(AAPTR_MASTER, 45, 0, 55, 0, WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION);
	if(master && master.CountInv("PM_EnvySigilGoAway") == 1)
	 SetStateLabel("Death");
	else if(!master)
	 SetStateLabel("Death");
  }
	
  States
  {
  Spawn:
   C1TE AAA 5 A_FadeIn(0.55,0);
   C1TE A 1;
   Wait;
  Death:
   TNT1 A 0 
   {
   if(master)
    master.A_TakeInventory("PM_EnvySigilGoAway");
   }
   C1TE A 5 A_FadeOut(0.35);
   Wait;
  }
}

Class PM_EnvyCastSigil : Actor
{
  Default
  {
  StencilColor "Green";
  Scale 0.60;
  Alpha 0.75;
  +FLATSPRITE
  +NOINTERACTION
  +BRIGHT;
  Translation "0:255=%[0,0,0]:[0.3,2.0,0.1]";
  }
  override void PostBeginPlay()
	{
	if(master)
		{
		master.A_StartSound("PM/SigilSpawn",20);
		}
	Super.PostBeginPlay();
	pitch = 270;
	}
  override void Tick()
  {
	Super.Tick();
	A_Warp(AAPTR_MASTER, 45, 0, 40, 0, WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION);
	if(master && master.CountInv("PM_EnvySigilGoAway") == 1)
	 SetStateLabel("Death");
	else if(!master)
	 SetStateLabel("Death");
  }
  States
  {
  Spawn:
   TNT1 A 0;
   C1TE AAA 5 A_FadeIn(0.55,0);
   C1TE A 1;
   Wait;
  Death:
    TNT1 A 0 
   {
   if(master)
    master.A_TakeInventory("PM_EnvySigilGoAway");
   }
   C1TE A 2 A_FadeOut(0.35);
   Wait;
  }
}

Class PM_EnvySigilGoAway : Inventory
{
 Default { Inventory.MaxAmount 1; }
}

Class PM_EnvyMorphGhost : Actor
{
 Default
 {
  +CLIENTSIDEONLY
  +NOINTERACTION
  RenderStyle "Stencil";
  StencilColor "Green";
  Alpha 0.60;
 }
States
{
Spawn:
    TNT1 A 3;
    "----" A 1 A_FadeOut(0.045);
	Wait;
    }
}

Class PM_BarbedWireTemp : Actor
{
	Default
	{
	Monster;
	+SOLID
	+FLOORHUGGER
	+NOBLOOD
	+FORCEXYBILLBOARD
	+FRIENDLY
	-COUNTKILL
	+NODAMAGETHRUST
	+DONTTHRUST
	+NOTARGET
	Gravity 500;
	Radius 5;
	Health 500;
	Height 5;
	Scale 0.5;
	PainChance 256;
	}
	
	int timer;
	
	States
	{
	LoadSprites:
		B1RB AB 0;
	Spawn:
		B1RB # 0 NoDelay;
		B1RB # 0
		{
			A_SetScale(frandom(.1,.3),frandom(.1,.3));
			frame = random(0, 1);
			bSPRITEFLIP = randompick(false, true);
			timer = random(30, 70);
		}
		B1RB ########### 3 A_SetScale(Scale.x + frandom(0.1, 0.25), scale.y + frandom(0.1, 0.15));
		Goto Loopin;
	Loopin:
		B1RB # 10
		{
			if (timer <= 0) SetStateLabel("Death");
			timer--;
			A_Explode((3), 55, XF_NOTMISSILE);
			A_RadiusGive("PM_SlothSlowdown", 55, RGF_PLAYERS|RGF_MONSTERS);
		}
		Loop;
	Death:
		B1RB ##### 5 A_Fadeout(0.3);
		Stop;
	}
}

Class PM_SlothSlowdown : PowerSpeed
{
	Default
	{
		Powerup.Duration -3;
		Speed 0.5;
		Inventory.Icon "";
		Powerup.Color "33 33 33", .15;
		+POWERSPEED.NOTRAIL;
	}
}

Class PM_SlothSlowdownLong : PowerSpeed
{
	Default
	{
		Powerup.Duration -11;
		Speed 0.45;
		Inventory.Icon "";
		Powerup.Color "01 45 59", .3;
		+POWERSPEED.NOTRAIL;
	}
}

Class PM_PlasmaShieldBase : Actor
{
	Default
	{
		Tag "Plasmatic Shield";
		DamageFactor "Plasma", 1.5;
		DamageFactor "Explosive", 0.3;
		RadiusDamageFactor 0.5;
		Height 60;
		Radius 25;
		Health 400;
		+NORADIUSDMG
		+FLATSPRITE
		+SHOOTABLE
		+NOGRAVITY
		+SOLID
		+THRUSPECIES
		+NOBLOOD
		+DONTSPLASH
		+NOPAIN
		+DONTTHRUST
		+BRIGHT
		+NOICEDEATH
		+NOBLOODDECALS
		+DONTHARMCLASS
		+NEVERRESPAWN
		Scale 1.6;
		Alpha 0.05;
		RenderStyle "AddShaded";
		StencilColor "ffffff";
	}
	
	int timer;
	
	override void Tick()
	{
		super.Tick();
		if (master && master.health > 0) A_Warp(AAPTR_MASTER,28,flags:WARPF_INTERPOLATE|WARPF_NOCHECKPOSITION);
		else SetStateLabel("Nullify");
	}
	
	override void PostBeginPlay()
	{
		super.PostBeginPlay();
		tex[0] = TexMan.CheckForTexture("GNSML0",TexMan.Type_Sprite);
		tex[1] = TexMan.CheckForTexture("WHILA0",TexMan.Type_Sprite);
		tex[2] = TexMan.CheckForTexture("FIR4R0",TexMan.Type_Sprite);
		pitch = 270;
		if (master)
		{
			master.GiveInventory("PM_ShieldActive", 1);
			species = master.GetSpecies();
		}
	}
	
	override bool CanCollideWith(Actor other, bool passive)
	{
		if(!other) return false;
		if(!master) return false;
		if(!other.target) return false;
		if(other.bNOBLOCKMAP && other.target.GetSpecies() == master.GetSpecies()) return false;
		if(other == master) return false;
		return true;
	}
	
	textureID tex[3];
	
	States
	{
	Spawn:
		TNT1 A 1;
		PMSH AAAAAAA 1 A_FadeIn(0.01);
		PMSH A 1
		{
			A_StartSound("HellSoldier/ChargeReady", 11, pitch: 1.35);
			A_StartSound("Warforge/Sniper2", 12, volume: 0.5, pitch: 0.5);
			alpha = 1;
			for(int i=random(5, 15); i > 0; i--) A_SpawnParticleEx(fillcolor, tex[0], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(50,100), size: frandom(50,150), xoff: frandom(-20, 20), yoff: frandom(-20, 20), zoff: frandom(-20, 20), velx: frandom(-0.6,0.6), vely: frandom(-0.6,0.6), velz: frandom(-0.6,0.6), startalphaf: frandom(.3, .8), fadestepf: -0.5, sizestep: 8, startroll: random(-180,180), rollvel: frandom(-1, 1));
			for(int i=2; i>0; i--) A_SpawnParticleEx(fillcolor, tex[2], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(20,45), size: frandom(300,600), xoff: 10, zoff: 35, velx: frandom(-0.6,0.6), vely: frandom(-0.6,0.6), velz: frandom(-0.6,0.6), startalphaf: frandom(.5, 1), fadestepf: -0.5, sizestep: -30, startroll: random(-180,180), rollvel: frandom(-4, 4));
		}
		Goto Idle;
	Idle:
		PMSH A 1
		{
			alpha = frandom(0.7, 1);
		}
		Loop;
	Death:
		PMSH A 1;
		TNT1 A 1
		{
			alpha = 1;
			A_SpawnParticleEx(fillcolor, tex[2], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: 400, size: 450.0, xoff: -10,  startalphaf: 1, fadestepf: 0.1, startroll: random(-180,180));
			
			for (int i = 2; i > 0; i--) A_SpawnItemEx("PM_WretchedBallFlare",flags:SXF_TRANSFERRENDERSTYLE|SXF_TRANSFERSTENCILCOL);
			for (int i = 3; i > 0; i--) A_SpawnItemEx("PM_BlueLongFlare",flags:SXF_TRANSFERRENDERSTYLE|SXF_TRANSFERSTENCILCOL);
			for (int i = 4; i > 0; i--) A_SpawnItemEx("NetherShockFlare",flags:SXF_TRANSFERRENDERSTYLE|SXF_TRANSFERSTENCILCOL);
			for (int i = 20; i > 0; i--) A_SpawnParticleEx(fillcolor, tex[1], style: STYLE_Add,  flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(4,20), size: frandom(30,500), velx: frandom(-10,10), vely: frandom(-10,10), velz: frandom(-10,10),  startalphaf: frandom(0.8,0.9), fadestepf: 0, sizestep: 0, startroll: random(-180,180), rollvel: frandom(-20,20), rollacc: 0);
			
			A_StartSound("PMPlasmaShield/Explode", 20);
			if (master)
			{
				if (master.health > 0)
				{
					master.SetStateLabel("Pain");
					master.tics = 40;
					master.DamageMobj(master, self, 150, "Plasma", DMG_PLAYERATTACK|DMG_NO_PAIN);
				}
				master.TakeInventory("PM_ShieldActive", 1);
			}
			for (int i = 9; i > 0; i--)
			{
				let glob = Spawn("PM_BigFireGlobs", Vec3Offset(0, 0, 35));
				if (glob)
				{
					glob.vel.x = random(-9, 9);
					glob.vel.y = random(-9, 9);
					glob.vel.z = random(-9, 9);
					glob.SetShade(fillcolor);
					glob.A_SetRenderStyle(1, STYLE_AddShaded);
				}
			}
			let orb = Spawn("PM_DirectorMindPower", Vec3Offset(0, 0, 35));
			if (orb) { orb.alpha = 1; orb.scale *= 1.5; orb.SetShade(fillcolor); }
			A_QuakeEx(6, 6, 0, 20, 0, 400, "", QF_3D|QF_SCALEDOWN);
			for(int i=random(15, 25); i > 0; i--) A_SpawnParticleEx(fillcolor, tex[0], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(50,100), size: frandom(50,150), xoff: frandom(-20, 20), yoff: frandom(-20, 20), zoff: frandom(-20, 20), velx: frandom(-0.6,0.6), vely: frandom(-0.6,0.6), velz: frandom(-0.6,0.6), startalphaf: frandom(.3, .8), fadestepf: -0.5, sizestep: 8, startroll: random(-180,180), rollvel: frandom(-1, 1));
			for(int i=2; i>0; i--) A_SpawnParticleEx(fillcolor, tex[2], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(20,45), size: frandom(300,600), xoff: 10, zoff: 35, velx: frandom(-0.6,0.6), vely: frandom(-0.6,0.6), velz: frandom(-0.6,0.6), startalphaf: frandom(.5, 1), fadestepf: -0.5, sizestep: -30, startroll: random(-180,180), rollvel: frandom(-4, 4));
		}
		TNT1 AAAAAAAAAA 2 A_SpawnParticleEx(fillcolor, tex[1], style: STYLE_Add, flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL, lifetime: random(1,6), size: frandom(15,500), velx: frandom(-8,8), vely: frandom(-8,8), velz: frandom(-8,8), startalphaf: frandom(0.5,0.9), startroll: random(-180,180), rollvel: frandom(-20,20));
		Stop;	
	Nullify:
		TNT1 A 0;
		Stop;
	}
}

Class PM_ShieldActive : Inventory { Default { Inventory.MaxAmount 1; } }
Class PM_BelphegorShield : PM_PlasmaShieldBase { Default { Health 600; Tag "Belphegor's Barricade"; Scale 1.75; StencilColor "f716bf"; } }