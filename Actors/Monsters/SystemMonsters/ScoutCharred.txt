Class PM_ScoutCharred : PMUnaffMonsterBase
{
  Default
  {
  Health 65;
  Radius 20;
  Height 56;
  Speed 6;
  Mass 250;
  Painchance 80;
  Gibhealth 20;
  SeeSound "Charred/Sight";
  Monster;
  ActiveSound "Charred/Active";
  PainSound "Charred/Pain";
  DeathSound "Charred/Death";
  Obituary "%o turned into a screeching inferno by a Charred.";
  HitObituary "%o's skin melted off from a Charred's claws.";
  Bloodcolor "DarkRed";
  BloodType "PM_DarkRedBloodBase";
  +NOTARGET
  +FLOORCLIP
  +DONTHARMCLASS
  +DONTHARMSPECIES
  -COUNTKILL
  Tag "Charred";
  Species "Imp";
  TeleFogSourceType "PM_SmallDemonicTeleportFog";
  TeleFogDestType "PM_DemonicTeleportFog";
  }
  States
  {
  Spawn:
	TNT1 A 0;
	TNT1 A 1
		{
		if (TestMobjLocation())
			return A_Jump(256,"Begin");
		else
			return A_Jump(256,"Die");
		}
  Begin:
	TNT1 A 0 A_SetAngle(random(-360,360));
	TNT1 A 0 A_SpawnItemEx("PM_DemonicTeleportFog",0,0,-8,0,0,0,0,SXF_NOCHECKPOSITION);
  Standing:
    CH5R AAAAAAAAAA 10 PM_Look();
	CH5R A 0
	{
	if (!random(0, 30))
			{
				A_StartSound("Charred/Idle",554,volume:frandom(0.1,0.7),pitch:frandom(0.7,1));
			}
	}
	CH5R A 0 A_Jump(30,"Despawn");
	CH5R A 0 A_Jump(125,"Explore");
    Loop;
  Despawn:
	TNT1 A 0;
	TNT1 A 0 A_SpawnItemEx("PM_SmallDemonicTeleportFog",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION);
	Stop;
  Explore:
	TNT1 A 0 { bMISSILEevenMore=False; }
	TNT1 A 0
	{
	if (!random(0, 12))
			{
				A_StartSound("Charred/Idle",554,volume:frandom(0.1,0.7),pitch:frandom(0.7,1));
			}
	}
	TNT1 A 0 A_StartSound("Imp/Step",4,volume:0.7);
	CH5R AAABBB 3
	{
	PM_Look();
	A_Wander();
	}
	TNT1 A 0 A_StartSound("Imp/Step",4,volume:0.7);
	CH5R CCCDDD 3
	{
	A_Wander();
	PM_Look();
	}
	TNT1 A 0 A_SetSpeed(6);
	CH5R A 0 A_Jump(20,"Standing");
    Loop;
  Look:
	TNT1 A 0 A_JumpIfTargetinLOS("Spotted",150,JLOSF_DEADNOJUMP);
	TNT1 A 0 A_StartSound("Imp/Step",4);
    CH5R AAA 2 PM_LookingForPlayer();
	TNT1 A 0 A_Recoil(-0.5);
	CH5R BBB 2 PM_LookingForPlayer();
	TNT1 A 0 A_Recoil(-0.5);
	TNT1 A 0 A_StartSound("Imp/Step",4);
	TNT1 A 0 A_JumpIfTargetinLOS("Spotted",150,JLOSF_DEADNOJUMP);
	CH5R CCC 2 PM_LookingForPlayer();
	TNT1 A 0 A_Recoil(-0.5);
	CH5R DDD 2 PM_LookingForPlayer();
	TNT1 A 0 A_Recoil(-0.5);
	TNT1 A 0 { bTHRUSPECIES = false; }
	CH5R A 0 A_Jump(30,"Despawn");
    Loop;
  Spotted:
	TNT1 A 0;
    Goto See;
  See:
	TNT1 A 0;
	TNT1 A 0 { bNOPAIN = true; }
	CH5R AAAAAAAAAAAAA 4 A_FaceTarget();
	CH5R VVVVVVVVVVV 3 A_FaceTarget();
	TNT1 A 0 A_StartSound("Charred/ScoutCall",35);
	CH5R WWWWWWWWWW 3 A_FaceTarget();
	TNT1 A 0 A_SpawnItemEx("PM_DemonTPReinforcementManager",0,0,0,0,0,0,random(-360,360));
	CH5R AAAAA 3 A_FaceTarget();
	Goto Replace;
  Replace:
	TNT1 A 0;
	TNT1 A 0 A_SpawnItemEx("PM_Charred",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION);
	Stop;
  Pain:
    TNT1 A 0 A_StopSound(CHAN_5);
    CH5R H 2;
    CH5R H 2 A_Pain;
    Goto See;
  Die:
	TNT1 A 0;
	Stop;
  Death:
	TNT1 A 0;
	TNT1 A 0 A_StopSound(35);
    CH5R I 8;
    CH5R J 8 PM_Scream();
    CH5R K 6;
    CH5R L 6 A_NoBlocking;
	TNT1 A 0 A_StartSound("Corpse/Fall",CHAN_6);
    CH5R M -1;
    Stop;
  XDeath:
      TNT1 A 0 A_StopSound(555);
	  CH5R O 5 PM_Gib();
	  CH5R P 5 A_XScream;
	  CH5R Q 5 A_NoBlocking;
	  CH5R RST 5;
	  CH5R U -1;
	  Stop;
	}
}