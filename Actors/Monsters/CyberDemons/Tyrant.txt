Class PM_Tyrant : PMBossMonsterBase
{
  static const int SweepAngles[] = { -30, -25, -20, -15, -10, -5, -3, 0, 3, 5, 10, 15, 20, 25, 30 };
  static const int SweepAngles2[] = { 30, 25, 20, 15, 10, 5, 3, 0, -3, -5, -10, -15, -20, -25, -30 };
  protected int SweepIndex;
  protected int rage;
  
  Default
  {
  PMMonsterBase.CodexLore
  "Prideful banes of humanity, with the strength of a million men and the firepower of several battleships. Let their strength bless this unclean land, and let their presence strike the deepest, primal fear in the hearts of men and women.

   If the Heresy Lords command small hordes, then Tyrants are the captains and generals of large-scale hordes, leading their troops in the frontlines and participating within the battles themselves, bearing down upon the human resistance like hammer against nail.
   Their supreme firepower allows them to wipe out armed convoys and platoons, conquering the soil and laying waste to all humanity holds dear. For this reason, their target priority is extremely high on the list.

   Exercise extreme caution when dealing with Tyrants, for they are an offensive force most terrifying to behold in a fight. They care not for the lives of other allied demons when attacking you.";
  Health 4000;
  Radius 40;
  Height 110;
  Speed 28;
  PainChance 3;
  Scale 1.2;
  MeleeRange 130;
  Mass 1000;
  Species "Cyberdemon";
  +DONTHARMSPECIES
  +DONTHARMCLASS
  +DONTRIP
  +BOSS
  +BOSSDEATH
  +FLOORCLIP
  +NOFEAR
  +NORADIUSDMG
  +DONTMORPH
  Obituary "%o was annihilated by a Tyrant.";
  BloodType "PM_NormalTyrantBloodBase";
  Tag "Tyrant";
  SeeSound "Tyrant/Sight";
  PainSound "Tyrant/Pain";
  DeathSound "Tyrant/Death";
  ActiveSound "Tyrant/Active";
  TeleFogSourceType "PM_SmallDemonicTeleportFog";
  TeleFogDestType "PM_DemonicTeleportFog";
  }
  States
  {
  Spawn:
    DUKE A 0 NoDelay { rage = 0; }
  Idle:
	DUKE A 10 A_Look;
	Loop;
  See:
    TNT1 A 0 
	{ 
	if(health < 3500) //less than 3500 health? a little annoyed
	{ rage = 1; }     //oh wait
	if(health < 2200) //oh shit this green man is kicking my ass how DARE
	{ rage = 2; }
	}
	TNT1 A 0 { bNODROPOFF = false; }
	TNT1 A 0 { bNOPAIN = false; }
	TNT1 A 0 A_Quake(1, 3, 0, 412);
	TNT1 A 0 A_StartSound("Tyrant/Hoof",CHAN_5);
	DUKE AAA 3 A_Chase("Melee","Missile",CHF_DONTMOVE);
	DUKE AABBB 3 A_Chase();
	TNT1 A 0 A_Quake(1, 3, 0, 412);
	TNT1 A 0 A_StartSound("Tyrant/Hoof",CHAN_5);
	DUKE CCC 3 A_Chase("Melee","Missile",CHF_DONTMOVE);
    DUKE CCDDD 3 A_Chase();
	TNT1 A 0 A_Jump(25,"See2");
	Loop;
   See2:
	TNT1 A 0 { bNOPAIN = false; }
	TNT1 A 0 A_Quake(1, 3, 0, 412);
	TNT1 A 0 A_StartSound("Tyrant/Hoof",CHAN_5);
	DUKE AAAA 2 A_Chase("Melee","Missile",CHF_DONTMOVE);
	DUKE BBBB 2 A_Chase();
	TNT1 A 0 A_Quake(1, 3, 0, 412);
	TNT1 A 0 A_StartSound("Tyrant/Hoof",CHAN_5);
	DUKE CCCC 2 A_Chase("Melee","Missile",CHF_DONTMOVE);
    DUKE DDDD 2 A_Chase();
	TNT1 A 0 A_Jump(15,"See");
	Loop;
  Melee:
	TNT1 A 0;
	TNT1 A 0 A_Jump(100,"Plasmathrower","DodgeLeft","DodgeRight");
	DUKE BBBB 5 Light("TyrantMExp") A_FaceTarget();
	TNT1 A 0 A_StartSound("Tyrant/Stomp",CHAN_5);
	TNT1 A 0 A_StartSound("Tyrant/RocketExp",CHAN_7);
	TNT1 A 0 
		{
		A_SpawnProjectile("TyrantStomp",10,0,0,0);
		A_Explode(100,240);
		//Radius_Quake (2, 54, 0, 25, 0);
		}
	TNT1 AAAAAAAAAAAA 0 A_SpawnItemEx("PM_OrangeEmbers",0,-30,2,random(-5,5),random(-5,5),random(1,8),0,SXF_NOCHECKPOSITION);
	TNT1 A 0
	{
	for (int i = -80; i <= 80; i+= 10)
    A_SpawnProjectile("PM_DefilerBreath",3,-30,i);
	}
	TNT1 A 0 A_SpawnItemEx("OrangeShockwaveBig");
	TNT1 A 0 A_SpawnItemEx("OrangeExplosionFlare");
	TNT1 A 0 A_SpawnItemEx("PM_OrangeEmbersSpawn");
	TNT1 A 0 A_SpawnItemEx("PM_OFireBallExplode");
	TNT1 AAAAAAAA 0 A_SpawnItemEx("PM_HectebusBallExplode",0,0,3,random(-5,5),random(-5,5),random(0,5),random(0,360));
	DUKE CCC 5 Light("TyrantMExp");
    Goto See;
  Missile:
	TNT1 A 0 A_Jump(55,"Missile8","Missile0");
	TNT1 A 0 A_Jump(80,"Missile0","DodgeLeft","DodgeRight","Missile1","BackMissiles");
	TNT1 A 0 A_JumpIfCloser(500,"PlasmaThrower");
	TNT1 A 0 A_Jump(255,"Missile1","Missile2","Missile6","Missile8","Missile9","BackMissiles");
  BackMissiles:
	TNT1 A 0 { bNOPAIN = true; }
	TNT1 A 0 
	{ 
	if(rage == 2)
	pm_attackloop = -2;
	else
	pm_attackloop = 0;
	}
	TNT1 A 0 A_StartSound("Tyrant/Attack",CHAN_6);
	DUKE AAA 5 A_FaceTarget();
  BMissileLoop:
	DUKE D 7 Light("TyrantFire")
	{
	 if(rage == 2) 
	 A_SetTics(6);
	else if(rage == 1)
	 A_SetTics(7);
	A_FaceTarget();
	A_SpawnProjectile("PM_TyrantBackMissile",88,25,-100,CMF_OFFSETPITCH,frandom(0,-40));
	}
	DUKE D 7 Light("TyrantFire")
	{
	if(pm_attackloop > 2)
	{ SetStateLabel("BMissileEnd"); }
	if(rage == 2) 
	 A_SetTics(5);
	else if(rage == 1)
	 A_SetTics(7);
	A_FaceTarget();
	A_SpawnProjectile("PM_TyrantBackMissile",88,-25,100,CMF_OFFSETPITCH,frandom(0,-40));
	pm_attackloop++;
	}
	Loop;
   BMissileEnd:
	DUKE A 5 A_FaceTarget();
	TNT1 A 0 
	{                                                      //[NERU] the idea here is that it'll chain
	if(rage == 2 && random(1,5) == 1)                      //between more attacks the longer
	 SetStateLabel("RageTransition2");                     //you damage it, so this plus the fact that it
	else if (rage == 1 && random(1,5) == 1)                //won't be in pain during attacks coooould make the fight
	 SetStateLabel("RageTransition1");                     //a bit more hectic
	}                                  
	Goto See;
  RageTransition1:
    DUKE EEE 2 A_FaceTarget();
    TNT1 A 0 A_Jump(256,"Missile0","Missile1","Missile9"); //stream barrages (occasionally sweeping),                                                                      
	Goto See;                                                                    //sabot rounds and single railgun
  RageTransition2:
    DUKE EEE 2 A_FaceTarget();
    TNT1 A 0 A_Jump(256,"Missile1","Missile6","Missile9"); //sabot rounds, sweeping stream barrages, triple/single railgun, 
	TNT1 A 0 A_JumpIfCloser(500,"Plasmathrower");                           //seeking barrage
	Goto See;                                                                               //get close and die instantly
  DodgeLeft:
	TNT1 A 0 { bNODROPOFF = true; }
	DUKE E 1 A_FaceTarget();
	TNT1 A 0 A_StartSound("Tyrant/Dodge",CHAN_7);
	DUKE E 0 ThrustThing ( int(ceil(angle * 256 / 360 + 192)) , 20,0,0);
	DUKE EEEEEEEEEEEEEEEEEE 1
	{
	A_SpawnItemEx("PM_TyrantBoosterGlobs",-20,25,85,0,0,-3,0,128);
	A_SpawnItemEx("PM_TyrantBoosterGlobs",-20,-25,85,0,0,-3,0,128);
	A_SpawnItemEx("PM_OrangeEmbers",0,40,5,random(-5,5),random(-5,5),random(1,8),0,SXF_NOCHECKPOSITION);
	A_SpawnItemEx("PM_OrangeEmbers",0,-40,5,random(-5,5),random(-5,5),random(1,8),0,SXF_NOCHECKPOSITION);
	}
	DUKE EE 2 A_FaceTarget();
	TNT1 A 0 { bNODROPOFF = false; }
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1) 
	 SetStateLabel("RageTransition2");
	else if(rage == 1 && random(1,5) == 1)
	 SetStateLabel("RageTransition1");
	}
	TNT1 A 0 A_Jump(65,"Missile8");
	Goto Missile0;
  DodgeRight:
    TNT1 A 0 { bNODROPOFF = true; }
	DUKE E 1 A_FaceTarget();
    TNT1 A 0 A_StartSound("Tyrant/Dodge",CHAN_7);
	DUKE E 0 ThrustThing ( int(ceil(angle * 256 / 360 + 64)) , 20,0,0);
	DUKE EEEEEEEEEEEEEEEEEE 1
	{
	A_SpawnItemEx("PM_TyrantBoosterGlobs",-20,25,85,0,0,-3,0,128);
	A_SpawnItemEx("PM_TyrantBoosterGlobs",-20,-25,85,0,0,-3,0,128);
	A_SpawnItemEx("PM_OrangeEmbers",0,40,2,random(-5,5),random(-5,5),random(1,8),0,SXF_NOCHECKPOSITION);
	A_SpawnItemEx("PM_OrangeEmbers",0,-40,2,random(-5,5),random(-5,5),random(1,8),0,SXF_NOCHECKPOSITION);
	}
	DUKE EE 2 A_FaceTarget();
    TNT1 A 0 { bNODROPOFF = false; }
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	else if(rage == 1 && random(1,8) == 1)
	 SetStateLabel("RageTransition1");
	}
	TNT1 A 0 A_Jump(65,"Missile8");
	Goto Missile0;
  PlasmaThrower:
	TNT1 A 0 A_Jump(180,"Missile1","Missile2","Missile6","Missile8","Missile9");
	TNT1 A 0 { bNOPAIN = true; }
	TNT1 A 0 A_StartSound("Tyrant/Flamer",CHAN_7,CHANF_LOOPING,1);
	DUKE EEE 3 A_FaceTarget();
	DUKE FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 1 Light("TyrantRail")
		{
		A_SpawnProjectile("RedChargeFlare",68,-22);
		A_SpawnProjectile("TyrantPlasmaThrower",68,-25,random(-3,3),CMF_OFFSETPITCH|CMF_AIMDIRECTION,pitch*+1+2);
		A_SpawnProjectile("TyrantPlasmaThrower",68,-25,random(-3,3),CMF_OFFSETPITCH|CMF_AIMDIRECTION,pitch*+1+2);
		A_FaceTarget(2,3,0,0);
		}
	TNT1 A 0 A_StopSound(CHAN_7);
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	else if(rage == 1 && random(1,4) == 1)
	 SetStateLabel("RageTransition1");
	}
	DUKE ED 4 A_FaceTarget();
	Goto See;
  Missile0: //13 rockets
	TNT1 A 0 { bNOPAIN = true; }
	TNT1 A 0 { pm_attackloop = 0; }
	DUKE EEEEEE 3 A_FaceTarget();
  Mis0Loop:
	DUKE F 2 Light("TyrantFire")
		{
		A_SpawnProjectile("PlasmatronFlare",68,-25);
		A_SpawnProjectile("PM_TyrantStreamRocket",68,-25,random(-1,1),CMF_OFFSETPITCH,random(-1,1));
		A_FaceTarget();
		}
	DUKE E 2 
	    {
		if(pm_attackloop > 12)
		{ return ResolveState("Mis0End"); }
	    A_FaceTarget();
		pm_attackloop++;
		return ResolveState(null);
		}
	Loop;
	Mis0End:
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	else if(rage == 1 && random(1,5) == 1)
	 SetStateLabel("RageTransition1");
	}
	DUKE ED 2 A_FaceTarget();
	Goto See;
 Missile1: //shell loading start
	TNT1 A 0 A_StartSound("Tyrant/Attack",CHAN_6);
	TNT1 A 0 { 
	bNOPAIN = true;
	pm_attackloop = 0;
	}
	DUKE EEEEEEEE 1 A_FaceTarget();
  Mis1Loop1: //loading shells
    TNT1 A 0 A_StartSound("Tyrant/ShellLoad");
	DUKE EEEEEEEEEEEEEEEEEEE 1
    {
	 A_FaceTarget();
	 A_SpawnProjectile("RedChargeFlare",68,-22);
	 A_CustomRailgun(0,-35,"","Red",RGF_SILENT|RGF_FULLBRIGHT,range:500,duration:1,spawnofs_z:15);
	}
	DUKE EEEEEEE 1
    {
	 A_FaceTarget();
	 A_SpawnProjectile("RedChargeFlare",68,-22);
	 A_CustomRailgun(0,-35,"","Red",RGF_SILENT|RGF_FULLBRIGHT,range:500,duration:1,spawnofs_z:15);
	}
	TNT1 A 0 {
	if(pm_attackloop == 2)
	SetStateLabel("Mis1Loop1Ready");
	if(random(1,4) == 1)
	SetStateLabel("Mis1Loop1Ready");
    }
	TNT1 A 0 { pm_attackloop += 1; }
	Loop;
 Mis1Loop1Ready:
    TNT1 A 0 A_StartSound("Tyrant/ShellLoadReady");
	DUKE EEEEEEEEEEEEEEEEEEEEEEE 1
    {
	 A_FaceTarget();
	 A_SpawnProjectile("RedChargeFlare",68,-22);
	 A_CustomRailgun(0,-35,"","Red",RGF_SILENT|RGF_FULLBRIGHT,range:500,duration:1,spawnofs_z:15);
	}  
 Mis1Loop2: //FIRE
    DUKE F 15 Light("TyrantFire")
	{
	 A_StartSound("Tyrant/ShellFire",CHANF_OVERLAP);
	 A_StartSound("Tyrant/ShellFireAdd",8,CHANF_OVERLAP);
	 A_StartSound("Tyrant/ShellFireAdd2",9,CHANF_OVERLAP);
	 A_SpawnProjectile("PM_TyrantTankShell",68,-25,frandom(-0.5,0.5),CMF_OFFSETPITCH,frandom(-1.5,1.5));
	 A_FaceTarget();
	}
	TNT1 A 0 A_StartSound("Tyrant/ShellOpen",CHAN_6);
	DUKE EEEEEEEEEEEEEEEEEEEEEEEEEE 1 
	{
	  A_SpawnParticleEx("",TexMan.CheckForTexture("GNSMK0"),style: STYLE_Normal,flags: SPF_RELATIVE|SPF_ROLL,lifetime: random(30,80),size: frandom(20,40),angle: 0,xoff: 35,yoff: -25,zoff: 68,velx: frandom(4,15),vely: frandom(-1,1),velz: frandom(-1,1),accelx: frandom(-0.1,0),accelz: frandom(0,0.1),startalphaf: frandom(0.5,0.8),fadestepf: -1,sizestep: 5,startroll: random(-180,180));
	  A_FaceTarget();
	  A_SpawnProjectile("RedChargeFlare",68,-22);
	  A_CustomRailgun(0,-35,"","Red",RGF_SILENT|RGF_FULLBRIGHT,range:500,duration:1,spawnofs_z:15);
	}
	TNT1 A 0 A_StartSound("Tyrant/ShellFall",CHAN_7,pitch:frandom(0.75,1.25));
	DUKE EEEEEEEEEEEEEEEEEEEEE 1 
	{
	A_FaceTarget();
	A_SpawnProjectile("RedChargeFlare",68,-22);
	A_CustomRailgun(0,-35,"","Red",RGF_SILENT|RGF_FULLBRIGHT,range:500,duration:1,spawnofs_z:15);
	}
	TNT1 A 0 {
	if(pm_attackloop > 0)
	SetStateLabel("Mis1Loop2");
	pm_attackloop--;
	}
	Goto Mis1End;
  Mis1End:
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	else if(rage == 1 && random(1,4) == 1)
	 SetStateLabel("RageTransition1");
	}
	DUKE ED 8 A_FaceTarget();
	Goto See;
  Missile3: //15 seeking missiles
	TNT1 A 0 { bNOPAIN = true; }
	TNT1 A 0 { pm_attackloop = 0; }
	DUKE EEE 3 A_FaceTarget();
  Mis3Loop:
	DUKE FFFFFFFFFFFFFFF 2 Light("TyrantFire")
		{
		if(pm_attackloop > 14)
		{ SetStateLabel("Mis3End"); }
		A_SpawnProjectile("PlasmatronFlare",68,-25);
		A_SpawnProjectile("PM_TyrantSmallRocket",68,-25,random(-10,10),CMF_OFFSETPITCH,0);
		pm_attackloop++;
		}
	DUKE E 1 A_FaceTarget();
	Loop;
  Mis3End:
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	else if(rage == 1 && random(1,4) == 1)
	 SetStateLabel("RageTransition1");
	}
	DUKE ED 4 A_FaceTarget();
	Goto See;
  Missile4: //single railgun
	//TNT1 A 0 A_Jump(150,"Missile5");
	TNT1 A 0 { bNOPAIN = true; }
	TNT1 A 0 A_StartSound("Tyrant/RailCharge",CHAN_5);
	DUKE EEEEEEEEE 1 Light("TyrantFire")
		{
		A_FaceTarget();
		A_SpawnProjectile("RedChargeFlare",60,-22);
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE,1,5,"RailNullPuff",-2.1,0,4096,2,5,0,"RailAimDot1",0);
		}
	DUKE EEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget();
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 2, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot1", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	DUKE EEEEEEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget();
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot1", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	TNT1 A 0 A_StartSound("Tyrant/RailWarn",CHAN_6);
	DUKE EEEEEEEEEEEEEEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget(0.2,3,0,0);
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot2", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	TNT1 A 0 A_StartSound("Tyrant/RailFire",CHAN_5);
	DUKE F 10 Light("TyrantRail")
		{
		A_FaceTarget(0.2,3,0,0);
		A_CustomRailgun(25, -25, "Red", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "OrangeShockwave", -2.1, 0, 4096, 2, 8, 0, "RailFireDot", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	DUKE GGGGGGGGGG 1;
	DUKE EEEEEEE 1;
	TNT1 A 0 A_StartSound("GenericSteam",CHAN_6);
	DUKE EEEEEEEEEEEEE 1 A_SpawnItemEx("PM_VentSmoke",60,-17,68,random(2,-2),random(2,-2),random(1,3),0,0,0,0);
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	else if(rage == 1 && random(1,4) == 1)
	 SetStateLabel("RageTransition1");
	}
	DUKE D 5;
	Goto See;
	Missile5: //triple railgun
	TNT1 A 0 { bNOPAIN = true; }
	TNT1 A 0 { if(rage == 2) A_Jump(256,1); }
	TNT1 A 0 A_StartSound("Tyrant/Attack",CHAN_6);
	TNT1 A 0 A_StartSound("Tyrant/RailCharge",CHAN_5);
	DUKE EEEEEEEEE 1 Light("TyrantFire")
		{
		A_FaceTarget();
		A_SpawnProjectile("RedChargeFlare",60,-22);
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 5, "RailNullPuff", -2.1, 0, 4096, 2, 5,0, "RailAimDot1", 0);
		}
	DUKE EEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget();
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 2, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot1", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	DUKE EEEEEEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget();
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot1", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	TNT1 A 0 A_StartSound("Tyrant/RailWarn",CHAN_6);
	DUKE EEEEEEEEEEEEEEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget(0.2,3,0,0);
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot2", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	TNT1 A 0 A_StartSound("Tyrant/RailFire",CHAN_5);
	DUKE F 10 Light("TyrantRail")
		{
		A_FaceTarget(0.2,3,0,0);
		A_CustomRailgun(25, -25, "Red", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "OrangeShockwave", -2.1, 0, 4096, 2, 8, 0, "RailFireDot", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	DUKE GGGGGGGGGGG 1;
	DUKE EEEEEEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget();
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot1", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	TNT1 A 0 A_StartSound("Tyrant/RailWarn",CHAN_6);
	DUKE EEEEEEEEEEEEEEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget(0.2,3,0,0);
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot2", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	TNT1 A 0 A_StartSound("Tyrant/RailFire",CHAN_5);
	DUKE F 10 Light("TyrantRail")
		{
		A_FaceTarget(0.2,3,0,0);
		A_CustomRailgun(25, -25, "Red", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "OrangeShockwave", -2.1, 0, 4096, 2, 8, 0, "RailFireDot", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	DUKE GGGGGGGGGGG 1;
	DUKE EEEEEEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget();
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot1", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	TNT1 A 0 A_StartSound("Tyrant/RailWarn",CHAN_6);
	DUKE EEEEEEEEEEEEEEEEEEE 1 Light("TyrantRail")
		{
		A_FaceTarget(0.2,3,0,0);
		A_CustomRailgun(0, -25, "", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "RailNullPuff", -2.1, 0, 4096, 2, 5, 0, "RailAimDot2", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	TNT1 A 0 A_StartSound("Tyrant/RailFire",CHAN_5);
	DUKE F 10 Light("TyrantRail")
		{
		A_FaceTarget(0.2,3,0,0);
		A_CustomRailgun(25, -25, "Red", "Red", RGF_FULLBRIGHT|RGF_SILENT|RGF_EXPLICITANGLE  , 1, 0, "OrangeShockwave", -2.1, 0, 4096, 2, 8, 0, "RailFireDot", 0);
		A_SpawnProjectile("FakeTyrantActor",60,-22,0,CMF_OFFSETPITCH,0);
		A_SpawnProjectile("RedChargeFlareLarge",60,-22);
		}
	DUKE GGGGGGGGGGGGGGGG 1;
	DUKE EEEEEEE 1;
	TNT1 A 0 A_StartSound("GenericSteam");
	DUKE EEEEEEEEEEEEEEE 1 A_SpawnItemEx("PM_VentSmoke",60,-17,68,random(2,-2),random(2,-2),random(1,3),0,0,0,0);
	TNT1 A 0
	{
	if(rage == 2 && random(1,4) == 1)
	 SetStateLabel("RageTransition2");
	}
	DUKE D 5;
	Goto See;
  Missile6: //15 stream missiles
	TNT1 A 0 { bNOPAIN = true; }
	TNT1 A 0 { sweepindex = 0; }
	DUKE EEE 3 A_FaceTarget();
  Mis6Loop:
	DUKE F 3 Light("TyrantFire")
		{
		A_SpawnProjectile("PlasmatronFlare",68,-25);
		A_SpawnProjectile("PM_TyrantStreamRocket",68,-25,sweepangles[sweepindex]);
		A_FaceTarget();
		}
	DUKE E 3 A_FaceTarget();
	DUKE E 0 A_JumpIf(++sweepindex == sweepangles.size(), 1);
	Loop;
  Mis6End:
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	}
	DUKE ED 8 A_FaceTarget();
	Goto See;
    Missile8: //3 rockets
	TNT1 A 0 { 
	bNOPAIN = true;
	pm_attackloop = 1;
	}
	DUKE EEE 6 A_FaceTarget();
  Mis8Loop:
	DUKE F 12 Light("TyrantFire")
		{
		A_SpawnProjectile("PlasmatronFlare",68,-25);
		A_SpawnProjectile("TyrantHeavyRocket",68,-25,0);
		A_FaceTarget();
		}
	DUKE E 14 
	    {
	    if(pm_attackloop < 0)
	    SetStateLabel("Mis8End");
	    A_FaceTarget();
		pm_attackloop--;
	    }
	Loop;
  Mis8End:
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	}
	DUKE EEDD 4 A_FaceTarget();
	Goto See;
  Missile9: //15 stream missiles
	TNT1 A 0 { bNOPAIN = true; }
	TNT1 A 0 { sweepindex = 0; }
	DUKE EEE 3 A_FaceTarget();
  Mis9Loop:
	DUKE F 3 Light("TyrantFire")
		{
		A_SpawnProjectile("PlasmatronFlare",68,-25);
		A_SpawnProjectile("PM_TyrantStreamRocket",68,-25,SweepAngles2[SweepIndex]);
		A_FaceTarget();
		}
	DUKE E 3 A_FaceTarget();
	DUKE E 0 A_JumpIf(++SweepIndex == SweepAngles2.Size(), 1);
	Loop;
  Mis9End:
	TNT1 A 0
	{
	if(rage == 2 && random(1,3) == 1)
	 SetStateLabel("RageTransition2");
	}
	DUKE ED 8 A_FaceTarget();
	Goto See;
  Pain:
    DUKE G 10 A_Pain;
    Goto See;
  Death: 
	TNT1 A 0 A_StopSound(CHAN_7);
	TNT1 AAAAA 0 A_SpawnItemEx("PM_DefilerBreath",random(-40,40),random(-40,40),random(10,75),random(-3,3),random(-3,3),random(-3,3));
    DUKE H 11 Light("TyrantFire") A_Scream;
	TNT1 AAAAAA 0 A_SpawnItemEx("PM_DefilerBreath",random(-40,40),random(-40,40),random(10,75),random(-3,3),random(-3,3),random(-3,3));
    DUKE I 9 Light("TyrantFire");
	TNT1 AAAAAAAA 0 A_SpawnItemEx("PM_DefilerBreath",random(-40,40),random(-40,40),random(10,75),random(-3,3),random(-3,3),random(-3,3));
	DUKE JKL 6 Light("TyrantFire");
	TNT1 AAAAAAA 0 A_SpawnItemEx("PM_DefilerBreath",random(-40,40),random(-40,40),random(10,75),random(-3,3),random(-3,3),random(-3,3));
	TNT1 A 0 A_NoBlocking;
	TNT1 AAAAAAA 0 A_SpawnItemEx("PM_DefilerBreath",random(-40,40),random(-40,40),random(10,75),random(-3,3),random(-3,3),random(-3,3));
	DUKE MNO 6 Light("TyrantFire");
	TNT1 A 0
	{
	for (int i = -80; i <= 80; i+= 10)
    A_SpawnProjectile("PM_DefilerBreath",3,-30,i);
	}
	TNT1 A 0 A_SpawnItemEx("OrangeShockwaveBig");
	TNT1 A 0 A_SpawnItemEx("OrangeExplosionFlare");
	DUKE P 20 Light("TyrantFire");
    DUKE P -1 A_BossDeath;
	Stop;
  }
}

Class TyrantTargetingBase : Actor
{
    Default
	{
	Radius 1;
	Height 1;
	Damage 0;
	Speed 6;
	+THRUACTORS
	+MISSILE
	//+CLIENTSIDEONLY
	}
	States
	{
	Spawn:
		TNT1 AAA 1;
		TNT1 A 1 A_CustomRailgun(0, 0, "", "Red", RGF_SILENT || RGF_NOPIERCING || RGF_FULLBRIGHT , 2, 0, "RailNullPuff", 0, 0, 0, 2, 0.8, 1.0, "", 0);
		Stop;
	Death:
		Stop;
	}
}

Class PM_TyrantBackMissile : PMProjectileBase
{
    Default
	{
	 Radius 5;
	 Height 5;
	 Speed 16;
	 FastSpeed 16;
	 DamageFunction (25);
	 DamageType "Explosive";
	 Scale 1.25;
	 Alpha 1;
	 +BRIGHT
	 +SEEKERMISSILE
	 Reactiontime 400;
	 SeeSound "Tyrant/RocketRiver";
	 DeathSound "Tyrant/MissileExp";
	 RenderStyle "Normal";
	 Decal "Scorch";
	 PMProjectileBase.WhizSound "FastMissileFlyby";
	 PMProjectileBase.WhizRangeCheck 300;
	}
	
	override void PostBeginPlay()
	{
	 Super.PostBeginPlay();
	 tex[0] = TexMan.CheckForTexture("SPKOA0",TexMan.Type_Sprite);
	 tex[1] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
	 tex[2] = TexMan.CheckForTexture("LENRA0",TexMan.Type_Sprite);
	}
	
	TextureID tex[3];
	
	States
	{
	Spawn:
		TNT1 A 0;
		TNT1 A 0 A_ScaleVelocity(0.5);
		CMIS AAAAAAAAA 1 BRIGHT
		{
		 A_SpawnParticleEx("",tex[0],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,lifetime: random(1,70),size: frandom(0.2,9),xoff: random(-10,1),yoff: random(-2,2),zoff: random(-2,2),velx: frandom(-0.6,0.6),vely: frandom(-0.6,0.6),velz: frandom(-0.6,0.6),startalphaf: 1.0,fadestepf: -1,sizestep: -0.2,startroll: random(-180,180));
		 A_SpawnParticleEx("",tex[1],style: STYLE_None,flags: SPF_ROLL|SPF_RELATIVE,lifetime: random(20,80),size: 15.0,xoff: frandom(-2,-15),startalphaf: 0.8,fadestepf: -1,sizestep: 0.8,startroll: random(-180,180),rollvel: frandom(-0.5,0.5));
		}
		TNT1 A 0 A_ScaleVelocity(0.8);
		CMIS AAAAAAAAA 1 BRIGHT
		{
		 A_SpawnParticleEx("",tex[0],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,lifetime: random(1,70),size: frandom(0.2,9),xoff: random(-10,1),yoff: random(-2,2),zoff: random(-2,2),velx: frandom(-0.6,0.6),vely: frandom(-0.6,0.6),velz: frandom(-0.6,0.6),startalphaf: 1.0,fadestepf: -1,sizestep: -0.2,startroll: random(-180,180));
		 A_SpawnParticleEx("",tex[1],style: STYLE_None,flags: SPF_ROLL|SPF_RELATIVE,lifetime: random(20,80),size: 15.0,xoff: frandom(-2,-15),startalphaf: 0.8,fadestepf: -1,sizestep: 0.8,startroll: random(-180,180),rollvel: frandom(-0.5,0.5));
		}
		TNT1 A 0 A_StartSound("Fiend/MissileLaunch",24,CHANF_DEFAULT,0.90,ATTN_NORM,frandom(0.7,0.9));
		TNT1 A 0 A_StartSound("Cadaver/HomingLoop",CHAN_6,CHANF_LOOPING,0.8);
		TNT1 A 0 A_ScaleVelocity(5);
	Go1:
		CMIS AAAAAAAAAAAAAAAAAA 1 BRIGHT Light("AvatarFireball1") 
		{
		  PM_CheckWhiz();
		  A_SpawnItemEx("PM_TyrantBackFireGlobs",0,0,0,0,0,0,0,128);
		  A_SeekerMissile(5,8,SMF_PRECISE);
		  A_SpawnParticleEx("",tex[1],style: STYLE_None,flags: SPF_ROLL|SPF_RELATIVE,lifetime: random(20,80),size: 15.0,xoff: frandom(-2,-15),startalphaf: 0.8,fadestepf: -1,sizestep: 0.8,startroll: random(-180,180),rollvel: frandom(-0.5,0.5));
	      A_SpawnParticleEx("",tex[2],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT,lifetime: 2,size: 80.0,xoff: -10,startalphaf: 0.6);
		}
	Go2:
		CMIS A 1 BRIGHT Light("AvatarFireball1") 
		{
		  PM_CheckWhiz();
		  A_SpawnItemEx("PM_TyrantBackFireGlobs",0,0,0,0,0,0,0,128);
		  A_Weave(random(-3,3), random(-3,3), random(0,3), random(0,2));
		}
		CMIS A 1 BRIGHT Light("AvatarFireball1") 
		{
		  PM_CheckWhiz();
		  A_SpawnItemEx("PM_TyrantBackFireGlobs",0,0,0,0,0,0,0,128);
		  A_SeekerMissile(1,random(1,5),SMF_PRECISE);
		  A_SpawnParticleEx("",tex[1],style: STYLE_None,flags: SPF_ROLL|SPF_RELATIVE,lifetime: random(20,80),size: 15.0,xoff: frandom(-2,-15),startalphaf: 0.8,fadestepf: -1,sizestep: 0.8,startroll: random(-180,180),rollvel: frandom(-0.5,0.5));
	      A_SpawnParticleEx("",tex[2],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT,lifetime: 2,size: frandom(50,90),xoff: -10,startalphaf: 0.6);
		}
		Loop;
	Death:
		TNT1 A 0;
		TNT1 A 0 A_StopSound(CHAN_6);
		TNT1 A 0 
		{
		A_Explode(8,100);
		Radius_Quake (2, 54, 0, 10, 0);
		}
		TNT1 A 0 A_SpawnItemEx("PM_OrangeExplosionFlareSmall");
		TNT1 A 0 A_SpawnItemEx("PM_OrangeEmbersSpawn");
		TNT1 A 0 A_SpawnItemEx("PM_OFireBallExplode");
		TNT1 AAAAA 0 A_SpawnProjectile("PM_FiendBallExplode",0,0,random(0,360),2,random(0,360));
		TNT1 A 15 BRIGHT Light("AvatarFireball5");
		Stop;
	}
}

Class PM_TyrantTankShell : RevenantTracer
{
    Default
	{
	Radius 13;
	Height 13;
	Scale 1.25;
	DamageFunction (100);
	DamageType "Explosive";
	Speed 80;
	Projectile;
	+RANDOMIZE
	SeeSound "";
	DeathSound "";
	RenderStyle "Add";
	Decal "BigScorch";
	}

  override void PostBeginPlay()
  {
   Super.PostBeginPlay();
   tex[0] = TexMan.CheckForTexture("LEYSO0",TexMan.Type_Sprite);
   tex[1] = TexMan.CheckForTexture("DTPRO0",TexMan.Type_Sprite);
   tex[2] = TexMan.CheckForTexture("SPKOA0",TexMan.Type_Sprite);
   tex[3] = TexMan.CheckForTexture("LENRA0",TexMan.Type_Sprite);
   tex[4] = TexMan.CheckForTexture("BLHDA0",TexMan.Type_Sprite);
   tex[5] = TexMan.CheckForTexture("DUSTC0",TexMan.Type_Sprite);
   tex[6] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
  }
  
  TextureID tex[7];
  
	States
	{
	Spawn:
	    TNT1 A 0;
		TNT1 A 0
		{
		for(int i=random(3,4);i>0;i--)
		   { A_SpawnParticleEx("",TexMan.CheckForTexture("LEYSO0"),style: STYLE_Add,flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,lifetime: random(6,9),size: frandom(230,350),xoff: -20,velx: frandom(5,13),startalphaf: 1.0,fadestepf: -0.002,sizestep: frandom(0.0,3),startroll: random(-180,180)); }
			A_SpawnParticleEx("",TexMan.CheckForTexture("LEYSO0"),style: STYLE_Add,flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,lifetime: random(7,15),size: frandom(150,250),xoff: -20,velx: frandom(5,13),startalphaf: 1.0,fadestepf: -0.002,sizestep: frandom(0.0,3),startroll: random(-180,180));
			A_SpawnParticleEx("",TexMan.CheckForTexture("LEYSO0"),style: STYLE_Add,flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,lifetime: random(6,10),size: frandom(260,550),xoff: -20,velx: frandom(5,13),startalphaf: 1.0,fadestepf: -0.002,sizestep: frandom(0.0,3),startroll: random(-180,180));
		}
		TNT1 A 0
		{
		for(int i=random(5,12);i>0;i--)
	     { A_SpawnParticleEx("",tex[2],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,lifetime: random(1,150),size: frandom(1,20),xoff: frandom(-2,2),yoff: frandom(-2,2),zoff: frandom(-2,2),velx: frandom(1,13),vely: frandom(-6,6),velz: frandom(-0.3,5),accelx: frandom(-0.005,0.005),accely: frandom(-0.005,0.005),accelz: frandom(-0.0,-0.8),startalphaf: 1.0,fadestepf: -1,sizestep: -0.2,startroll: random(-180,180)); }
		}
	Go:
		TRCR AAAA 1 BRIGHT Light("AvatarFireball4")
		{
			Radius_Quake(3,30,0,25,0);
			A_SpawnParticleEx("",TexMan.CheckForTexture("LEYSO0"),style: STYLE_Add,flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,lifetime: 1,size: frandom(100,350),xoff: -10,velx: frandom(5,13),startalphaf: 1.0,fadestepf: -0.002,sizestep: frandom(0.0,3),startroll: random(-180,180));
			A_SpawnParticleEx("",tex[6],style: STYLE_None,flags: SPF_ROLL|SPF_RELATIVE,lifetime: random(20,80),size: 25.0,xoff: frandom(-2,-25),startalphaf: 0.8,fadestepf: -1,sizestep: 1,startroll: random(-180,180),rollvel: frandom(-0.5,0.5));
		}
		Loop;
	Death:
		TNT1 A 0 
		{
		  A_Explode(50,200);
		  Radius_Quake (5, 54, 0, 25, 0);
		}
		TNT1 A 0 A_StartSound("BigExplosionDistant", CHAN_7);
		TNT1 A 0 A_StartSound("Tyrant/ShellExplode", CHAN_6);
		TNT1 A 0 A_SpawnItemEx("OrangeShockwaveBig");
		TNT1 A 0 A_SpawnItemEx("OrangeExplosionFlare");
		TNT1 AAA 0 A_SpawnItemEx("PM_ExplosionFlareSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0);
		TNT1 AAAAAAA 0 A_SpawnItemEx("PM_GenericExplosionFlames",0,0,0,random(-3,3),random(-3,3),random(-2,3),0,SXF_NOCHECKPOSITION);
		TNT1 A 0 A_SpawnParticleEx("",TexMan.CheckForTexture("LEYSO0"),style: STYLE_Add,flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,lifetime: 4,size: 450,xoff: -10,velx: frandom(5,13),startalphaf: 1.0,fadestepf: -0.002,sizestep: frandom(0.0,3),startroll: random(-180,180));
		TNT1 AAAA 0
		{
		 A_SpawnParticleEx("",tex[3],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,lifetime: 8,size: 360,zoff: 40,startalphaf: 1,startroll: random(-180,180));
		 A_SpawnParticleEx("",tex[4],style: STYLE_Add,flags: SPF_ROLL|SPF_RELATIVE|SPF_FULLBRIGHT,lifetime: 20,size: 800,zoff: 50, startalphaf: 1,fadestepf: -1,sizestep: -25,startroll: random(-180,180));
		for(int i=random(15,35);i>0;i--)
		{
		  A_SpawnParticleEx("727272",tex[5],style: STYLE_Normal,flags: SPF_RELATIVE|SPF_ROLL,lifetime: random(40,70),size: frandom(1,30),zoff: random(10,60),velx: frandom(-12,12),vely: frandom(-12,12),velz: frandom(-5,15),accelz: frandom(-0.1,-0.5),startalphaf: 1.0,fadestepf: 0,sizestep: -0.2,startroll: random(-180,180),rollvel: random(-4,4));
		  A_SpawnParticleEx("6C6C6C",tex[6],style: STYLE_Normal,flags: SPF_RELATIVE|SPF_ROLL,lifetime: random(30,60),size: frandom(10,220),zoff: random(10,60),velx: random(-9,9),vely: random(-9,9),velz: random(-9,9),startalphaf: frandom(0.2,0.75),fadestepf: -1,sizestep: 12,startroll: random(-180,180),rollvel: random(-2,2));
		 }
		}
		TNT1 AAA 0 A_SpawnItemEx("PM_ExplosionLongerSmokeBig",0,0,1,random(-8,8),random(-8,8),random(0,3),0,0,70);
		TNT1 A 18 BRIGHT Light("TyrantMExp");
		Stop;
	}
}

Class TyrantHeavyRocket : RevenantTracer
{
    Default
	{
	Radius 8;
	Height 8;
	Scale 0.95;
	DamageFunction (75);
	DamageType "Explosive";
	Speed 20;
	Projectile;
	+RANDOMIZE
	RenderStyle "Normal";
	SeeSound "Tyrant/Rocket";
	DeathSound "Tyrant/RocketExp";
	Decal "BigScorch";
	}
	
	override void PostBeginPlay()
	{
	 tex[0] = TexMan.CheckForTexture("SPKOA0",TexMan.Type_Sprite);
	 tex[1] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
	 tex[2] = TexMan.CheckForTexture("LENRA0",TexMan.Type_Sprite);
	}
	
	TextureID tex[3];
	
	States
	{
	Spawn:
		TNT1 A 0;
		TNT1 A 0
		{
		for(int i=random(3,4);i>0;i--)
		 { A_SpawnParticleEx("",TexMan.CheckForTexture("LEYSO0"),style: STYLE_Add,flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,lifetime: random(6,9),size: frandom(230,350),xoff: -20,velx: frandom(5,13),startalphaf: 1.0,fadestepf: -0.002,sizestep: frandom(0.0,3),startroll: random(-180,180)); }
		 A_SpawnParticleEx("",TexMan.CheckForTexture("LEYSO0"),style: STYLE_Add,flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,lifetime: random(7,15),size: frandom(150,250),xoff: -20,velx: frandom(5,13),startalphaf: 1.0,fadestepf: -0.002,sizestep: frandom(0.0,3),startroll: random(-180,180));
		 A_SpawnParticleEx("",TexMan.CheckForTexture("LEYSO0"),style: STYLE_Add,flags: SPF_RELATIVE|SPF_ROLL|SPF_FULLBRIGHT,lifetime: random(6,10),size: frandom(260,550),xoff: -20,velx: frandom(5,13),startalphaf: 1.0,fadestepf: -0.002,sizestep: frandom(0.0,3),startroll: random(-180,180));
		}
		TYM1 AAAAAAAAA 1 BRIGHT
		{
		 A_ScaleVelocity(0.90);
		 A_SpawnParticleEx("",tex[0],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,lifetime: random(1,70),size: frandom(0.2,9),xoff: random(-10,1),yoff: random(-4,4),zoff: random(-4,4),velx: frandom(-0.6,0.6),vely: frandom(-0.6,0.6),velz: frandom(-0.6,0.6),startalphaf: 1.0,fadestepf: -1,sizestep: -0.2,startroll: random(-180,180));
		}
		TYM1 AAAAAAAA 1 BRIGHT
		{
		 A_ScaleVelocity(0.93);
		 A_SpawnParticleEx("",tex[0],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,lifetime: random(1,70),size: frandom(0.2,9),xoff: random(-10,1),yoff: random(-4,4),zoff: random(-4,4),velx: frandom(-0.6,0.6),vely: frandom(-0.6,0.6),velz: frandom(-0.6,0.6),startalphaf: 1.0,fadestepf: -1,sizestep: -0.2,startroll: random(-180,180));
		}
		TNT1 A 0 A_StartSound("FastMissileFlyby",24,CHANF_DEFAULT,0.90,ATTN_NORM,frandom(0.7,0.9));
		TNT1 A 0 A_StartSound("Draugr/RocketLaunch",CHAN_6,CHANF_LOOPING,1.0);
		TNT1 A 0 A_ScaleVelocity(5.5);
	Go:
		TYM1 AAABBB 1 BRIGHT Light("AvatarFireball4") 
		{
		 A_SpawnParticleEx("",tex[2],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT|SPF_ROLL,lifetime: random(1,2),size: frandom(100.0,200.0),xoff: -10,startalphaf: frandom(0.3,0.95),startroll: random(-180,180));
		 A_SpawnParticleEx("",tex[1],style: STYLE_None,flags: SPF_ROLL|SPF_RELATIVE,lifetime: random(80,150),size: 30.0,xoff: frandom(-2,-15),startalphaf: 0.8,fadestepf: -1,sizestep: 0.8,startroll: random(-180,180),rollvel: frandom(-0.5,0.5));
		 A_SpawnItemEx("PM_DraugrRocketFireGlobs",random(-1,1),random(-1,1),random(-1,1),0,0,0,0,128,0);
		}
		Loop;
	Death:
		TNT1 A 0 
		{
		A_Explode(50,200);
		Radius_Quake (2, 54, 0, 25, 0);
		}
		TNT1 A 0 A_StopSound(CHAN_6);
		TNT1 A 0 A_StartSound("BigExplosionDistant", CHAN_7);
		TNT1 AAA 0 A_SpawnItemEx("PM_ExplosionFlareSpawner",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION,0);
		TNT1 AAAAAAA 0 A_SpawnItemEx("PM_GenericExplosionFlames",0,0,0,random(-3,3),random(-3,3),random(-2,3),0,SXF_NOCHECKPOSITION);
		TNT1 A 0 A_SpawnItemEx("PM_OFireBallExplode");
		TNT1 AAAA 0 A_SpawnItemEx("PM_ExplosionLongerSmokeBig",0,0,1,random(-8,8),random(-8,8),random(0,3),0,0,70);
		TNT1 A 18 BRIGHT Light("TyrantMExp");
		Stop;
	}
}

Class PM_TyrantStreamRocket : PMProjectileBase
{
    Default
	{
	Radius 3;
	Height 3;
	Scale 1;
	DamageFunction (35);
	DamageType "Explosive";
	Speed 30;
	Projectile;
	+RANDOMIZE
	RenderStyle "Normal";
	SeeSound "Tyrant/Missile";
	DeathSound "Tyrant/MissileExp";
	Decal "PM_OrangeFireScorch";
	PMProjectileBase.WhizSound "FastMissileFlyby";
	PMProjectileBase.WhizRangeCheck 300;
	}
	
	override void PostBeginPlay()
	{
	 Super.PostBeginPlay();
	 tex[0] = TexMan.CheckForTexture("SPKOA0",TexMan.Type_Sprite);
	 tex[1] = TexMan.CheckForTexture("GNSMK0",TexMan.Type_Sprite);
	 tex[2] = TexMan.CheckForTexture("LENRA0",TexMan.Type_Sprite);
	}
	
	TextureID tex[3];
	
	States
	{
	Spawn:
		TYM2 A 1 BRIGHT Light("AvatarFireball3")
		{
		  PM_CheckWhiz();
		  A_Weave(random(-3,3), random(-3,3), random(0,3), random(0,2));
		  A_SpawnItemEx("PM_TyrantMFireEffect",random(-1,1),random(-1,1),random(-1,1),0,0,0,0,128,0);
		  A_SpawnParticleEx("",tex[1],style: STYLE_None,flags: SPF_ROLL|SPF_RELATIVE,lifetime: random(20,80),size: 15.0,xoff: frandom(-2,-15),startalphaf: 0.8,fadestepf: -1,sizestep: 0.8,startroll: random(-180,180),rollvel: frandom(-0.5,0.5));
	      A_SpawnParticleEx("",tex[2],style: STYLE_Add,flags: SPF_RELATIVE|SPF_FULLBRIGHT,lifetime: 2,size: frandom(50,80),xoff: -10,startalphaf: 0.6);
		}
		Loop;
	Death:
		TNT1 A 0 
		{
		  A_Explode(8,100);
		  Radius_Quake (2, 54, 0, 10, 0);
		}
		TNT1 A 0 A_SpawnItemEx("PM_OrangeExplosionFlareSmall");
		TNT1 A 0 A_SpawnItemEx("PM_OrangeEmbersSpawn");
		TNT1 A 0 A_SpawnItemEx("PM_OFireBallExplode");
		TNT1 AAAAA 0 A_SpawnProjectile("PM_FiendBallExplode",0,0,random(0,360),2,random(0,360));
		TNT1 A 15 BRIGHT Light("AvatarFireball5");
		Stop;
	}
}

Class PM_TyrantSmallRocket : PMProjectileBase
{
    Default
	{
	Radius 3;
	Height 3;
	DamageFunction (35);
	DamageType "ExplosiveImpact";
	Speed 20;
	Projectile;
	+RANDOMIZE
	+SEEKERMISSILE
	RenderStyle "Normal";
	SeeSound "Tyrant/RocketRiver";
	DeathSound "Tyrant/MissileExp";
	Decal "PM_OrangeFireScorch";
	Scale 0.65;
	PMProjectileBase.WhizSound "FastMissileFlyby";
	PMProjectileBase.WhizRangeCheck 300;
	}
	States
	{
	Spawn:
		TYM3 AAAAAAAAAAAAAAAAAAAA 1 BRIGHT Light("AvatarFireball1") 
		{
		 if(random(1,2) == 1)
		  { A_ChangeVelocity(0,frandom(-1,1),frandom(-1,1),CVF_RELATIVE); }
		  PM_CheckWhiz();
		  A_SpawnItemEx("PM_TyrantMFireEffect",random(-1,1),random(-1,1),random(-1,1),0,0,0,0,128,0);
		}
	SeekTime:
		TYM3 AAAAAA 1 BRIGHT Light("AvatarFireball1") 
		{
		  PM_CheckWhiz();
		  A_SpawnItemEx("PM_TyrantMFireEffect",random(-1,1),random(-1,1),random(-1,1),0,0,0,0,128,0);
		  A_SeekerMissile(5,6,SMF_PRECISE);
		}
	SeekDone:
		TYM3 AA 1 BRIGHT Light("AvatarFireball1") 
		{
		  PM_CheckWhiz();
		  A_SpawnItemEx("PM_TyrantMFireEffect",random(-1,1),random(-1,1),random(-1,1),0,0,0,0,128,0);
		}
        Loop;
	Death:
		TNT1 A 0 A_Explode(8,100);
		TNT1 A 0 A_StartSound("SmallMissileExplosion");
		TNT1 A 0 A_SpawnItemEx("PM_OrangeExplosionFlareSmall");
		TNT1 A 0 A_SpawnItemEx("PM_OrangeEmbersSpawn");
		TNT1 A 0 A_SpawnItemEx("PM_OFireBallExplode");
		TNT1 AAAA 0 A_SpawnProjectile("PM_FiendBallExplode",0,0,random(0,360),2,random(0,360));
		FSHT BBCCDDEE 1 BRIGHT Light("AvatarFireball1");
		Stop;
	}
}


Class PM_TyrantMFireEffect : Actor
{
  Default
  {
  +NOINTERACTION
  +CLIENTSIDEONLY
  +FORCEXYBILLBOARD
  +ROLLSPRITE
  Renderstyle "Add";
  Scale 0.25;
  +Bright
  }
  States
  {
  Spawn:
	TNT1 A 2;
	TNT1 A 0 A_SetRoll(random(0,360));
  Go:
	TNT1 A 0 A_SetScale(Scale.X-0.01);
	F1R1 A 1 Bright A_FadeOut(0.12);
	Loop;
	}
}

Class TyrantPlasmaThrower : PM_CyberFodderFire
{

  override void BeginPlay()
   {
   special2 |= 1;
   Super.BeginPlay();
   }
  
   Default
   {
   Radius 14;
   Height 14;
   Speed 26;
   DamageFunction 7;
   DamageType "Plasma";
   Scale 0.13;
   Translation "0:255=%[0,0,0]:[1.9,0.5,0.5]";
   }
   States
   {
   Spawn:
	  TNT1 A 0;
      NULL A 1 Bright;
	  TNT1 A 0 A_Jump(255,"Go","Go2");
	  Go:
	  TNT1 A 0 A_SetRoll(random(0,360));
      FLMF ABCDEFEDCBA 2 Bright Light("TyrantRail")
	  {
	    A_SpawnItemEx("PM_FlameSmoke",random(-5,5),random(-5,5),random(0,3),0,0,random(1,3),0,0,248);
	    A_SetScale(Scale.X+0.06);
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-3,-6),random(-2,2),random(0,4),CVF_RELATIVE);
	  FLMF ABCDEF 2 Bright Light("TyrantRail");
	  TNT1 A 0 A_ChangeVelocity(random(-3,-6),random(-2,2),random(0,4),CVF_RELATIVE);
	  FLMF EDCBABC 2 Bright Light("TyrantRail")
	  {
	    A_SetScale(Scale.X+0.07);
	    A_SpawnItemEx("PM_FlameSmoke",random(-5,5),random(-5,5),random(0,3),0,0,random(1,3),0,0,240);
	    A_Fadeout(0.1);
	  }
	  Stop;
	  Go2:
	  TNT1 A 0 A_SetRoll(random(0,360));
	  FLMF FEDCBABCDEF 2 Bright
	  {
	    A_SpawnItemEx("PM_FlameSmoke",random(-5,5),random(-5,5),random(0,3),0,0,random(1,3),0,0,248);
	    A_SetScale(Scale.X+0.05);
	  }
	  TNT1 A 0 A_ChangeVelocity(random(-2,-5),random(-2,2),random(0,4),CVF_RELATIVE);
	  FLMF EDCBA 2 Bright;
	  TNT1 A 0 A_ChangeVelocity(random(-2,-5),random(-2,2),random(0,4),CVF_RELATIVE);
	  FLMF BCDEFED 2 Bright
	  {
	    A_SetScale(Scale.X+0.07);
	    A_SpawnItemEx("PM_FlameSmoke",random(-5,5),random(-5,5),random(0,3),0,0,random(1,3),0,0,240);
	    A_Fadeout(0.1);
	  }
      Stop;
   Death:
      FRFX HIJ 2 Bright;
      FRFX J 0 A_SpawnProjectile ("TyrantPFire",0,0,0,4);
      FRFX KLM 2 Bright;
      FRFX NO 2 Bright;
      stop;
   }
}

Class TyrantPFire : ZombieDropFire
{
	Default { Translation "0:255=%[0,0,0]:[1.9,0.5,0.5]"; }
}

Class TyrantStomp : Actor
{
    Default
	{
	Radius 12;
	Height 8;
	+MISSILE
	Speed 15;
    DamageFunction (50);
	Renderstyle "Translucent";
	alpha 0.9;
	DamageType "Stomp";
    Gravity 1.0;
    Decal "Cracks";
    -NOGRAVITY
    +EXTREMEDEATH
	+NOTELEPORT
	+THRUACTORS
	Obituary "%o turned into a viscous red puddle by a Tyrant.";
	HitObituary "%o turned into a viscous red puddle by a Tyrant..";
	}
	States
	{
	Spawn:
        TNT1 A 1;
		TNT1 A 0 ThrustThingZ(0, -35, 0, 0);
		TNT1 A 10;
		Stop;
	Death:
        TNT1 A 0 A_StartSound("CLAP", 1);
		EXPL AAAA 0; //A_SpawnProjectile ("ExplosionSmoke", 0, 0, random (0, 360), 2, random (10, 12))
		TNT1 A 0 Radius_Quake(4, 15, 0, 25, 0);
		TNT1 A 0 Radius_Quake(2, 15, 0, 45, 0);
		EXPL A 0 A_Explode;
		TNT1 A 0 A_RadiusThrust(7000,350);
		SM8K BDFHJLNPRTVXZ 1;
		Stop;
	}
}